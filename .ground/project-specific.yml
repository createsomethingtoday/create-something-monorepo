# Ground MCP - Create Something Project-Specific Patterns
# Patterns unique to this monorepo's architecture

version: "1"

ignore:
  paths:
    # ─────────────────────────────────────────────────────────────────────
    # Side-Effect Imports
    # ─────────────────────────────────────────────────────────────────────
    # These files have no exports but are imported for side effects
    
    - "**/webflow/globals.ts"     # CSS injection for Shadow DOM components
    
    # ─────────────────────────────────────────────────────────────────────
    # Co-Located Experiment Data
    # ─────────────────────────────────────────────────────────────────────
    # Experiments often have co-located data files with relative imports
    # Ground's import resolution misses these patterns
    
    - "**/experiments/*/arenaData.ts"      # Living Arena game data
    - "**/experiments/*/svg-operations.ts" # Render Studio SVG utilities
    - "**/experiments/*/gameData.ts"       # Game configuration
    - "**/experiments/*/mockData.ts"       # Mock/seed data
    
    # ─────────────────────────────────────────────────────────────────────
    # Airtable Scripts
    # ─────────────────────────────────────────────────────────────────────
    # These are embedded directly in Airtable, not imported
    
    - "**/airtable-scripts/**"
    
  duplicate_pairs:
    # ─────────────────────────────────────────────────────────────────────
    # Intentional Duplicates
    # ─────────────────────────────────────────────────────────────────────
    # Each SvelteKit app needs its own analytics route handler
    # Even though they call the same shared functions
    
    - ["packages/agency/src/routes/api/analytics/track/+server.ts",
       "packages/io/src/routes/api/analytics/track/+server.ts"]
    - ["packages/agency/src/routes/api/analytics/events/+server.ts",
       "packages/io/src/routes/api/analytics/events/+server.ts"]
       
    # Model routing has different BeadsIssue types in each package
    # Adapts harness model-routing for orchestration layer
    - ["packages/harness/src/model-routing.ts",
       "packages/orchestration/src/integration/model-routing.ts"]
       
    # Stripe client uses different API versions per app
    - ["packages/agency/src/lib/services/stripe.ts",
       "packages/clearway/src/lib/services/stripe-connect.ts"]

# ─────────────────────────────────────────────────────────────────────
# Design Pattern Exceptions
# ─────────────────────────────────────────────────────────────────────
# Known drift and intentional exclusions from Canon design system

design_patterns:
  mode: "warn"
  
  ignore_paths:
    - "packages/maverick/**"           # Client project (uses Tailwind)
    - "packages/verticals/**"          # Client verticals (external styles)
    - "packages/clearway/src/embed/**" # Isolated widget (standalone CSS)
    - "packages/agency/clients/**"     # Client-specific sites (custom styling)
    - "**/dist/**"                     # Build artifacts (generated from src)
    - "**/visualizations/**"           # Experimental visualizations (custom SVG styling)
    - "**/papers/**"                   # Academic papers (custom prose styling)
    - "packages/space/**"              # Experimental space package
    - "packages/lms/**"                # Learning system (custom course styling)
    - "**/*.test.ts"
    - "**/node_modules/**"
    
  # Values that are intentionally NOT tokens (below design system granularity)
  allowed_values:
    spacing:
      - "1px"     # Border width, fine adjustments
      - "2px"     # Small gaps, borders (below --space-xs)
      - "-1px"    # Negative offset adjustments
      - "0.25rem" # Fine-grained spacing (xs/2)
      - "0.375rem" # Fine-grained spacing (xs * 0.6)
      - "0.5rem"  # Half of sm spacing
      - "0.75rem" # 3/4 of sm spacing
    typography:
      - "inherit"  # Inherit from parent
      - "100%"     # Percentage-based sizing
    colors:
      - "transparent"
      - "currentColor"
      - "inherit"
    
  known_drift:
    critical:
      - file: "packages/components/src/lib/components/SEO.svelte"
        issue: "21 export let props - needs Svelte 5 migration"
        status: "tracked"
        priority: "high"
        reason: "Used by 25+ pages across all properties"
        
    unmigrated:
      - package: "packages/tufte"
        issue: "Visualization library still Svelte 4"
        status: "tracked"
        priority: "low"
        reason: "Rarely used - migrate when touched"
        
    # Files with known low adoption that need attention
    low_adoption:
      - file: "packages/io/src/routes/visualizations/arena-scale/+page.svelte"
        adoption: "16.4%"
        priority: "medium"
        reason: "Experimental visualization - uses custom SVG styling"
      - file: "packages/io/src/routes/papers/ground-evidence-based-claims/+page.svelte"
        adoption: "32.0%"
        priority: "medium"
        reason: "Technical paper - uses code/markdown styling"
      - file: "packages/components/src/lib/brand/marks/PropertyMark.svelte"
        adoption: "17.6%"
        priority: "low"
        reason: "Brand mark - uses exact design spec colors"

report:
  format: markdown
  include_suggestions: true
  group_by: type
  verbose: true
