# Webflow Interaction Analysis

**Added: January 12, 2026**  
**Status: Integrated into Multi-Modal Plagiarism Detection**

---

## ðŸŽ¯ Purpose

Webflow templates are **not just HTML/CSS** - they include sophisticated JavaScript interactions:
- Animations and transitions
- Scroll-triggered effects
- Hover states
- Click interactions
- Parallax effects

**Problem:** Two templates could have:
- âœ… Different code (evades vector similarity)
- âœ… Different visual layouts (evades visual similarity)
- âŒ **Identical interactions** (plagiarism!)

---

## ðŸ” What We Extract

### 1. Interaction Markers
- `data-w-id` attributes (Webflow's interaction identifiers)
- Interactive element count
- Specific interaction IDs

### 2. CSS Patterns
- Animation definitions
- Transition properties
- Hover effects

### 3. Trigger Patterns
- Scroll triggers
- Click handlers
- Data attributes

### 4. Webflow Scripts
- `webflow.schunk.*.js` files
- Script loading patterns

---

## ðŸš¨ Critical Detection: Identical Interaction IDs

**If two templates share the same `data-w-id` values:**
```
CRITICAL: Identical interaction IDs detected (likely copy-paste)
```

This is **smoking gun evidence** of direct copying, because:
1. These IDs are auto-generated by Webflow
2. They're unique to each template
3. Sharing them means one was duplicated from the other

---

## ðŸ“Š Similarity Calculation

```python
interaction_similarity = (
    count_similarity * 0.4 +  # How many interactive elements
    id_overlap * 0.6           # How many IDs are identical
) * 100
```

### Thresholds

| Similarity | ID Overlap | Verdict |
|------------|-----------|---------|
| **> 80%** + Shared IDs | Any | **MAJOR** violation (copy-paste) |
| **> 70%** | Minimal | **MINOR** violation (similar patterns) |
| **< 70%** | None | Different (no violation) |

---

## ðŸ”§ Implementation

### Integrated into `MultiModalPlagiarismAnalyzer`

```python
# Step 1: Extract interaction signatures
orig_interactions = await analyzer.extract_interaction_signature(original_url)
copy_interactions = await analyzer.extract_interaction_signature(alleged_copy_url)

# Step 2: Compare
similarity, verdict = analyzer.compare_interactions(
    orig_interactions,
    copy_interactions
)

# Step 3: Factor into final verdict
# Interactions can upgrade severity:
# - Shared IDs + high similarity = MAJOR violation
# - High similarity without IDs = MINOR violation
```

### Methods Added

#### `extract_interaction_signature(url: str) -> Dict`

Extracts:
```python
{
    'interactive_elements': 42,        # Count of [data-w-id] elements
    'animations': 15,                  # CSS animations
    'transitions': 28,                 # CSS transitions
    'hover_effects': 12,               # Hover patterns
    'scroll_triggers': 6,              # Scroll-based triggers
    'click_triggers': 8,               # Click handlers
    'interaction_ids': [...],          # Actual IDs
    'webflow_scripts': [...]           # JS file names
}
```

#### `compare_interactions(orig, copy) -> Tuple[float, str]`

Returns:
- `float`: Similarity percentage (0-100)
- `str`: Verdict/explanation

---

## ðŸ“ˆ Impact on Verdict Logic

### Before (Visual Only)
```
3+ reconstructed sections = MAJOR
1+ reconstructed sections = MINOR
0 sections = NONE
```

### After (Visual + Interactions)
```
3+ reconstructed sections OR 80%+ interaction similarity with shared IDs = MAJOR
1+ reconstructed sections OR 70%+ interaction similarity = MINOR
Otherwise = NONE
```

---

## ðŸ§ª Testing

### Example: Visto Template

```bash
cd packages/agent-sdk
python3 test_interactions.py
```

Expected output:
```
ðŸ“Š Interaction Signature:
   â€¢ Interactive elements: 42
   â€¢ CSS animations: 15
   â€¢ Transitions: 28
   â€¢ Hover effects: 12
   â€¢ Scroll triggers: 6
   â€¢ Click triggers: 8
   â€¢ Webflow scripts: 4 files
   
   Script files:
      - webflow.schunk.e0c428ff9737f919.js
      - webflow.schunk.38d3322d7bc827bf.js
      - webflow.schunk.9dfb96661114d3db.js
      - webflow.schunk.67adf5eead96bc07.js
   
   First 5 interaction IDs:
      - 678ddbdb9b2e1...
      - 678ddbdb9b2e2...
      - 678ddbdb9b2e3...
```

---

## ðŸ’¡ Key Insights from Visto Template

### JavaScript Files Found
```html
<script src=".../js/webflow.schunk.e0c428ff9737f919.js"></script>
<script src=".../js/webflow.schunk.38d3322d7bc827bf.js"></script>
<script src=".../js/webflow.schunk.9dfb96661114d3db.js"></script>
<script src=".../js/webflow.schunk.67adf5eead96bc07.js"></script>
<script src=".../js/webflow.8e89ffb2.a6cf93bc2ef2d6af.js"></script>
```

These files contain:
- Animation definitions
- Interaction state machines
- Easing functions
- Trigger logic

### Why This Matters

**Scenario 1: Copy-Paste Plagiarism**
```
Template A:
  - data-w-id="678ddbdb9b2e1abc"
  - Hero fade-in animation
  
Template B (copied):
  - data-w-id="678ddbdb9b2e1abc"  â† SAME ID!
  - Hero fade-in animation
  
Result: 100% interaction ID overlap = CRITICAL VIOLATION
```

**Scenario 2: Reconstructed Plagiarism**
```
Template A:
  - 42 interactive elements
  - Scroll-triggered parallax on hero
  - Hover effects on cards
  - Stagger animations on list
  
Template B (recreated):
  - 40 interactive elements (similar count)
  - Same interaction types
  - Different IDs (recreated, not copied)
  
Result: 75% similarity = MINOR VIOLATION
```

**Scenario 3: Different Templates**
```
Template A:
  - 42 interactive elements
  - Scroll-based hero
  
Template B:
  - 12 interactive elements
  - Click-based navigation
  
Result: 30% similarity = NO VIOLATION
```

---

## ðŸ”® Future Enhancements

### Phase 1 (Current) âœ…
- [x] Count interactive elements
- [x] Extract interaction IDs
- [x] Detect shared IDs (smoking gun)
- [x] Calculate similarity score

### Phase 2 (Future)
- [ ] Parse `webflow.schunk.*.js` files directly
- [ ] Extract animation parameters (duration, easing, delays)
- [ ] Build interaction "fingerprints"
- [ ] Compare easing curves
- [ ] Detect timing pattern copying

### Phase 3 (Advanced)
- [ ] Visual interaction recording (capture animations)
- [ ] Compare animation videos frame-by-frame
- [ ] ML-based interaction pattern recognition
- [ ] Detect "reconstructed" interactions (same effect, different implementation)

---

## ðŸŽ“ Why This is Critical

### Real-World Example: Padelthon Case

**Human Reviewer Complaint:**
> "The testimonial carousel replicated from Forerunner and Evermind, including card sizes, alignment, and the quote-icon composition."

**What the reviewer saw:**
- Not just static layout
- **Animated carousel behavior**
- Transition timing
- Card movement patterns

**Without interaction analysis:**
- We only compare static screenshots
- Miss the animated behavior
- Could miss plagiarism

**With interaction analysis:**
- Extract carousel interaction IDs
- Compare animation parameters
- Detect if timing/easing was copied
- Catch plagiarism even if HTML is different

---

## ðŸ“š References

### Webflow Interaction System
- [Webflow Interactions Documentation](https://university.webflow.com/lesson/intro-to-interactions)
- [data-w-id Attribute](https://discourse.webflow.com/t/what-is-data-w-id/60000)

### Implementation Files
- `packages/agent-sdk/agents/plagiarism_visual_agent.py`
  - `extract_interaction_signature()` - Line 488
  - `compare_interactions()` - Line 560
  - Updated `_generate_verdict()` - Line 781

### Test Files
- `packages/agent-sdk/test_interactions.py` - Standalone test
- `packages/agent-sdk/test_padelthon_case.py` - Now includes interaction analysis

---

## âœ… Integration Status

**Status:** âœ… **INTEGRATED**

Interaction analysis is now automatically included in all multi-modal plagiarism analyses:

```python
from agents.plagiarism_visual_agent import MultiModalPlagiarismAnalyzer

analyzer = MultiModalPlagiarismAnalyzer()
result = await analyzer.analyze(
    original_url="https://template-a.webflow.io/",
    alleged_copy_url="https://template-b.webflow.io/"
)

# Result now includes:
# - Visual similarity per section
# - Interaction similarity overall
# - Verdict considering BOTH dimensions
```

**Next Test:** Re-run Padelthon case with interaction analysis included.

---

**Contribution:** This addresses a critical gap identified by the user - Webflow templates are more than static HTML, and interactions are a key dimension for plagiarism detection.
