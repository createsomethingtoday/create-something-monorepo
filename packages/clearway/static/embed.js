var CourtReserve=(function(sn){"use strict";var Kn=Array.isArray,Qr=Array.prototype.indexOf,Sn=Array.from,$r=Object.defineProperty,At=Object.getOwnPropertyDescriptor,ea=Object.getOwnPropertyDescriptors,ta=Object.prototype,na=Array.prototype,Jn=Object.getPrototypeOf,Gn=Object.isExtensible;function ra(t){for(var e=0;e<t.length;e++)t[e]()}function Zn(){var t,e,n=new Promise((r,s)=>{t=r,e=s});return{promise:n,resolve:t,reject:e}}const ve=2,En=4,Dn=8,Qe=16,$e=32,pt=64,ln=128,Ve=512,he=1024,Pe=2048,et=4096,Me=8192,tt=16384,Tn=32768,It=65536,Xn=1<<17,Qn=1<<18,Nt=1<<19,aa=1<<20,wt=32768,xn=1<<21,Cn=1<<22,ot=1<<23,Kt=Symbol("$state"),ia=Symbol("legacy props"),sa=Symbol(""),Lt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function la(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function oa(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ua(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ca(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function fa(t){throw new Error("https://svelte.dev/e/effect_orphan")}function va(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function da(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function ha(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function _a(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ga(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ba(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const $n=1,er=2,tr=4,ma=8,ya=16,pa=1,wa=4,ka=8,Sa=16,Ea=2,_e=Symbol(),Da="http://www.w3.org/1999/xhtml";function Ta(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function nr(t){return t===this.v}function xa(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function rr(t){return!xa(t,this.v)}let As=!1,Ae=null;function Rt(t){Ae=t}function ut(t,e=!1,n){Ae={p:Ae,i:!1,c:null,e:null,s:t,x:null,l:null}}function ct(t){var e=Ae,n=e.e;if(n!==null){e.e=null;for(var r of n)Sr(r)}return e.i=!0,Ae=e.p,{}}function ar(){return!0}let kt=[];function ir(){var t=kt;kt=[],ra(t)}function Ft(t){if(kt.length===0&&!Jt){var e=kt;queueMicrotask(()=>{e===kt&&ir()})}kt.push(t)}function Ca(){for(;kt.length>0;)ir()}function sr(t){var e=G;if(e===null)return U.f|=ot,t;if((e.f&Tn)===0){if((e.f&ln)===0)throw t;e.b.error(t)}else Ot(t,e)}function Ot(t,e){for(;e!==null;){if((e.f&ln)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t}const on=new Set;let ee=null,un=null,Ie=null,Le=[],cn=null,Pn=!1,Jt=!1;class We{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#o=null;#i=[];#a=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(e){Le=[],un=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of e)this.#s(r,n);this.is_fork||this.#c(),this.is_deferred()?(this.#l(n.effects),this.#l(n.render_effects),this.#l(n.block_effects)):(un=this,ee=null,or(n.render_effects),or(n.effects),un=null,this.#o?.resolve()),Ie=null}#s(e,n){e.f^=he;for(var r=e.first;r!==null;){var s=r.f,i=(s&($e|pt))!==0,l=i&&(s&he)!==0,c=l||(s&Me)!==0||this.skipped_effects.has(r);if((r.f&ln)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!c&&r.fn!==null){i?r.f^=he:(s&En)!==0?n.effects.push(r):Qt(r)&&((r.f&Qe)!==0&&n.block_effects.push(r),$t(r));var o=r.first;if(o!==null){r=o;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(this.#l(n.effects),this.#l(n.render_effects),this.#l(n.block_effects),n=n.parent),r=u.next,u=u.parent}}#l(e){for(const n of e)((n.f&Pe)!==0?this.#i:this.#a).push(n),this.#u(n.deps),ge(n,he)}#u(e){if(e!==null)for(const n of e)(n.f&ve)===0||(n.f&wt)===0||(n.f^=wt,this.#u(n.deps))}capture(e,n){this.previous.has(e)||this.previous.set(e,n),(e.f&ot)===0&&(this.current.set(e,e.v),Ie?.set(e,e.v))}activate(){ee=this,this.apply()}deactivate(){ee===this&&(ee=null,Ie=null)}flush(){if(this.activate(),Le.length>0){if(lr(),ee!==null&&ee!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#t)e(this);this.#t.clear()}#c(){if(this.#n===0){for(const e of this.#e)e();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(on.size>1){this.previous.clear();var e=Ie,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const i of on){if(i===this){n=!1;continue}const l=[];for(const[o,u]of this.current){if(i.current.has(o))if(n&&u!==i.current.get(o))i.current.set(o,u);else continue;l.push(o)}if(l.length===0)continue;const c=[...i.current.keys()].filter(o=>!this.current.has(o));if(c.length>0){var s=Le;Le=[];const o=new Set,u=new Map;for(const f of l)ur(f,c,o,u);if(Le.length>0){ee=i,i.apply();for(const f of Le)i.#s(f,r);i.deactivate()}Le=s}}ee=null,Ie=e}this.committed=!0,on.delete(this)}increment(e){this.#r+=1,e&&(this.#n+=1)}decrement(e){this.#r-=1,e&&(this.#n-=1),this.revive()}revive(){for(const e of this.#i)ge(e,Pe),St(e);for(const e of this.#a)ge(e,et),St(e);this.#i=[],this.#a=[],this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#t.add(e)}settled(){return(this.#o??=Zn()).promise}static ensure(){if(ee===null){const e=ee=new We;on.add(ee),Jt||We.enqueue(()=>{ee===e&&e.flush()})}return ee}static enqueue(e){Ft(e)}apply(){}}function Pa(t){var e=Jt;Jt=!0;try{for(var n;;){if(Ca(),Le.length===0&&(ee?.flush(),Le.length===0))return cn=null,n;lr()}}finally{Jt=e}}function lr(){var t=vt;Pn=!0;var e=null;try{var n=0;for(_n(!0);Le.length>0;){var r=We.ensure();if(n++>1e3){var s,i;Ma()}r.process(Le),ft.clear()}}finally{Pn=!1,_n(t),cn=null}}function Ma(){try{va()}catch(t){Ot(t,cn)}}let nt=null;function or(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(tt|Me))===0&&Qt(r)&&(nt=new Set,$t(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Tr(r):r.fn=null),nt?.size>0)){ft.clear();for(const s of nt){if((s.f&(tt|Me))!==0)continue;const i=[s];let l=s.parent;for(;l!==null;)nt.has(l)&&(nt.delete(l),i.push(l)),l=l.parent;for(let c=i.length-1;c>=0;c--){const o=i[c];(o.f&(tt|Me))===0&&$t(o)}}nt.clear()}}nt=null}}function ur(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const s of t.reactions){const i=s.f;(i&ve)!==0?ur(s,e,n,r):(i&(Cn|Qe))!==0&&(i&Pe)===0&&cr(s,e,r)&&(ge(s,Pe),St(s))}}function cr(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const s of t.deps){if(e.includes(s))return!0;if((s.f&ve)!==0&&cr(s,e,n))return n.set(s,!0),!0}return n.set(t,!1),!1}function St(t){for(var e=cn=t;e.parent!==null;){e=e.parent;var n=e.f;if(Pn&&e===G&&(n&Qe)!==0&&(n&Qn)===0)return;if((n&(pt|$e))!==0){if((n&he)===0)return;e.f^=he}}Le.push(e)}function Aa(t){let e=0,n=Et(0),r;return()=>{hn()&&(a(n),Ln(()=>(e===0&&(r=en(()=>t(()=>Gt(n)))),e+=1,()=>{Ft(()=>{e-=1,e===0&&(r?.(),r=void 0,Gt(n))})})))}}var Ia=It|Nt|ln;function Na(t,e,n){new La(t,e,n)}class La{parent;#e=!1;#t;#r=null;#n;#o;#i;#a=null;#s=null;#l=null;#u=null;#c=null;#f=0;#v=0;#h=!1;#d=null;#y=Aa(()=>(this.#d=Et(this.#f),()=>{this.#d=null}));constructor(e,n,r){this.#t=e,this.#n=n,this.#o=r,this.parent=G.b,this.#e=!!this.#n.pending,this.#i=Rn(()=>{G.b=this;{var s=this.#b();try{this.#a=Re(()=>r(s))}catch(i){this.error(i)}this.#v>0?this.#g():this.#e=!1}return()=>{this.#c?.remove()}},Ia)}#p(){try{this.#a=Re(()=>this.#o(this.#t))}catch(e){this.error(e)}this.#e=!1}#w(){const e=this.#n.pending;e&&(this.#s=Re(()=>e(this.#t)),We.enqueue(()=>{var n=this.#b();this.#a=this.#_(()=>(We.ensure(),Re(()=>this.#o(n)))),this.#v>0?this.#g():(zt(this.#s,()=>{this.#s=null}),this.#e=!1)}))}#b(){var e=this.#t;return this.#e&&(this.#c=rt(),this.#t.before(this.#c),e=this.#c),e}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#_(e){var n=G,r=U,s=Ae;He(this.#i),De(this.#i),Rt(this.#i.ctx);try{return e()}catch(i){return sr(i),null}finally{He(n),De(r),Rt(s)}}#g(){const e=this.#n.pending;this.#a!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#c),Pr(this.#a,this.#u)),this.#s===null&&(this.#s=Re(()=>e(this.#t)))}#m(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(e);return}this.#v+=e,this.#v===0&&(this.#e=!1,this.#s&&zt(this.#s,()=>{this.#s=null}),this.#u&&(this.#t.before(this.#u),this.#u=null))}update_pending_count(e){this.#m(e),this.#f+=e,this.#d&&Bt(this.#d,this.#f)}get_effect_pending(){return this.#y(),a(this.#d)}error(e){var n=this.#n.onerror;let r=this.#n.failed;if(this.#h||!n&&!r)throw e;this.#a&&(Ee(this.#a),this.#a=null),this.#s&&(Ee(this.#s),this.#s=null),this.#l&&(Ee(this.#l),this.#l=null);var s=!1,i=!1;const l=()=>{if(s){Ta();return}s=!0,i&&ba(),We.ensure(),this.#f=0,this.#l!==null&&zt(this.#l,()=>{this.#l=null}),this.#e=this.has_pending_snippet(),this.#a=this.#_(()=>(this.#h=!1,Re(()=>this.#o(this.#t)))),this.#v>0?this.#g():this.#e=!1};var c=U;try{De(null),i=!0,n?.(e,l),i=!1}catch(o){Ot(o,this.#i&&this.#i.parent)}finally{De(c)}r&&Ft(()=>{this.#l=this.#_(()=>{We.ensure(),this.#h=!0;try{return Re(()=>{r(this.#t,()=>e,()=>l)})}catch(o){return Ot(o,this.#i.parent),null}finally{this.#h=!1}})})}}function Ra(t,e,n,r){const s=vn;if(n.length===0&&t.length===0){r(e.map(s));return}var i=ee,l=G,c=Fa();function o(){Promise.all(n.map(u=>Oa(u))).then(u=>{c();try{r([...e.map(s),...u])}catch(f){(l.f&tt)===0&&Ot(f,l)}i?.deactivate(),fn()}).catch(u=>{Ot(u,l)})}t.length>0?Promise.all(t).then(()=>{c();try{return o()}finally{i?.deactivate(),fn()}}):o()}function Fa(){var t=G,e=U,n=Ae,r=ee;return function(i=!0){He(t),De(e),Rt(n),i&&r?.activate()}}function fn(){He(null),De(null),Rt(null)}function vn(t){var e=ve|Pe,n=U!==null&&(U.f&ve)!==0?U:null;return G!==null&&(G.f|=Nt),{ctx:Ae,deps:null,effects:null,equals:nr,f:e,fn:t,reactions:null,rv:0,v:_e,wv:0,parent:n??G,ac:null}}function Oa(t,e){let n=G;n===null&&oa();var r=n.b,s=void 0,i=Et(_e),l=!U,c=new Map;return Ga(()=>{var o=Zn();s=o.promise;try{Promise.resolve(t()).then(o.resolve,o.reject).then(()=>{u===ee&&u.committed&&u.deactivate(),fn()})}catch(v){o.reject(v),fn()}var u=ee;if(l){var f=!r.is_pending();r.update_pending_count(1),u.increment(f),c.get(u)?.reject(Lt),c.delete(u),c.set(u,o)}const g=(v,d=void 0)=>{if(u.activate(),d)d!==Lt&&(i.f|=ot,Bt(i,d));else{(i.f&ot)!==0&&(i.f^=ot),Bt(i,v);for(const[m,y]of c){if(c.delete(m),m===u)break;y.reject(Lt)}}l&&(r.update_pending_count(-1),u.decrement(f))};o.promise.then(g,v=>g(null,v||"unknown"))}),kr(()=>{for(const o of c.values())o.reject(Lt)}),new Promise(o=>{function u(f){function g(){f===s?o(i):u(s)}f.then(g,g)}u(s)})}function F(t){const e=vn(t);return Ar(e),e}function fr(t){const e=vn(t);return e.equals=rr,e}function vr(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)Ee(e[n])}}function Ba(t){for(var e=t.parent;e!==null;){if((e.f&ve)===0)return(e.f&tt)===0?e:null;e=e.parent}return null}function Mn(t){var e,n=G;He(Ba(t));try{t.f&=~wt,vr(t),e=Fr(t)}finally{He(n)}return e}function dr(t){var e=Mn(t);if(t.equals(e)||(t.v=e,t.wv=Lr()),!Dt)if(Ie!==null)hn()&&Ie.set(t,t.v);else{var n=(t.f&Ve)===0?et:he;ge(t,n)}}let An=new Set;const ft=new Map;let hr=!1;function Et(t,e){var n={f:0,v:t,reactions:null,equals:nr,rv:0,wv:0};return n}function M(t,e){const n=Et(t);return Ar(n),n}function ja(t,e=!1,n=!0){const r=Et(t);return e||(r.equals=rr),r}function h(t,e,n=!1){U!==null&&(!Ye||(U.f&Xn)!==0)&&ar()&&(U.f&(ve|Qe|Cn|Xn))!==0&&!it?.includes(t)&&ga();let r=n?pe(e):e;return Bt(t,r)}function Bt(t,e){if(!t.equals(e)){var n=t.v;Dt?ft.set(t,e):ft.set(t,n),t.v=e;var r=We.ensure();r.capture(t,n),(t.f&ve)!==0&&((t.f&Pe)!==0&&Mn(t),ge(t,(t.f&Ve)!==0?he:et)),t.wv=Lr(),_r(t,Pe),G!==null&&(G.f&he)!==0&&(G.f&($e|pt))===0&&(Fe===null?Qa([t]):Fe.push(t)),!r.is_fork&&An.size>0&&!hr&&za()}return e}function za(){hr=!1;var t=vt;_n(!0);const e=Array.from(An);try{for(const n of e)(n.f&he)!==0&&ge(n,et),Qt(n)&&$t(n)}finally{_n(t)}An.clear()}function Gt(t){h(t,t.v+1)}function _r(t,e){var n=t.reactions;if(n!==null)for(var r=n.length,s=0;s<r;s++){var i=n[s],l=i.f,c=(l&Pe)===0;if(c&&ge(i,e),(l&ve)!==0){var o=i;Ie?.delete(o),(l&wt)===0&&(l&Ve&&(i.f|=wt),_r(o,et))}else c&&((l&Qe)!==0&&nt!==null&&nt.add(i),St(i))}}function pe(t){if(typeof t!="object"||t===null||Kt in t)return t;const e=Jn(t);if(e!==ta&&e!==na)return t;var n=new Map,r=Kn(t),s=M(0),i=Tt,l=c=>{if(Tt===i)return c();var o=U,u=Tt;De(null),Nr(i);var f=c();return De(o),Nr(u),f};return r&&n.set("length",M(t.length)),new Proxy(t,{defineProperty(c,o,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&ha();var f=n.get(o);return f===void 0?f=l(()=>{var g=M(u.value);return n.set(o,g),g}):h(f,u.value,!0),!0},deleteProperty(c,o){var u=n.get(o);if(u===void 0){if(o in c){const f=l(()=>M(_e));n.set(o,f),Gt(s)}}else h(u,_e),Gt(s);return!0},get(c,o,u){if(o===Kt)return t;var f=n.get(o),g=o in c;if(f===void 0&&(!g||At(c,o)?.writable)&&(f=l(()=>{var d=pe(g?c[o]:_e),m=M(d);return m}),n.set(o,f)),f!==void 0){var v=a(f);return v===_e?void 0:v}return Reflect.get(c,o,u)},getOwnPropertyDescriptor(c,o){var u=Reflect.getOwnPropertyDescriptor(c,o);if(u&&"value"in u){var f=n.get(o);f&&(u.value=a(f))}else if(u===void 0){var g=n.get(o),v=g?.v;if(g!==void 0&&v!==_e)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(c,o){if(o===Kt)return!0;var u=n.get(o),f=u!==void 0&&u.v!==_e||Reflect.has(c,o);if(u!==void 0||G!==null&&(!f||At(c,o)?.writable)){u===void 0&&(u=l(()=>{var v=f?pe(c[o]):_e,d=M(v);return d}),n.set(o,u));var g=a(u);if(g===_e)return!1}return f},set(c,o,u,f){var g=n.get(o),v=o in c;if(r&&o==="length")for(var d=u;d<g.v;d+=1){var m=n.get(d+"");m!==void 0?h(m,_e):d in c&&(m=l(()=>M(_e)),n.set(d+"",m))}if(g===void 0)(!v||At(c,o)?.writable)&&(g=l(()=>M(void 0)),h(g,pe(u)),n.set(o,g));else{v=g.v!==_e;var y=l(()=>pe(u));h(g,y)}var _=Reflect.getOwnPropertyDescriptor(c,o);if(_?.set&&_.set.call(f,u),!v){if(r&&typeof o=="string"){var S=n.get("length"),k=Number(o);Number.isInteger(k)&&k>=S.v&&h(S,k+1)}Gt(s)}return!0},ownKeys(c){a(s);var o=Reflect.ownKeys(c).filter(g=>{var v=n.get(g);return v===void 0||v.v!==_e});for(var[u,f]of n)f.v!==_e&&!(u in c)&&o.push(u);return o},setPrototypeOf(){_a()}})}var gr,br,mr,yr;function Va(){if(gr===void 0){gr=window,br=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;mr=At(e,"firstChild").get,yr=At(e,"nextSibling").get,Gn(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Gn(n)&&(n.__t=void 0)}}function rt(t=""){return document.createTextNode(t)}function In(t){return mr.call(t)}function Zt(t){return yr.call(t)}function b(t,e){return In(t)}function jt(t,e=!1){{var n=In(t);return n instanceof Comment&&n.data===""?Zt(n):n}}function w(t,e=1,n=!1){let r=t;for(;e--;)r=Zt(r);return r}function qa(t){t.textContent=""}function pr(){return!1}let wr=!1;function Ua(){wr||(wr=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function dn(t){var e=U,n=G;De(null),He(null);try{return t()}finally{De(e),He(n)}}function Wa(t,e,n,r=n){t.addEventListener(e,()=>dn(n));const s=t.__on_r;s?t.__on_r=()=>{s(),r(!0)}:t.__on_r=()=>r(!0),Ua()}function Ya(t){G===null&&(U===null&&fa(),ca()),Dt&&ua()}function Ha(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function at(t,e,n){var r=G;r!==null&&(r.f&Me)!==0&&(t|=Me);var s={ctx:Ae,deps:null,nodes_start:null,nodes_end:null,f:t|Pe|Ve,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{$t(s),s.f|=Tn}catch(c){throw Ee(s),c}else e!==null&&St(s);var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&Nt)===0&&(i=i.first,(t&Qe)!==0&&(t&It)!==0&&i!==null&&(i.f|=It)),i!==null&&(i.parent=r,r!==null&&Ha(i,r),U!==null&&(U.f&ve)!==0&&(t&pt)===0)){var l=U;(l.effects??=[]).push(i)}return s}function hn(){return U!==null&&!Ye}function kr(t){const e=at(Dn,null,!1);return ge(e,he),e.teardown=t,e}function Nn(t){Ya();var e=G.f,n=!U&&(e&$e)!==0&&(e&Tn)===0;if(n){var r=Ae;(r.e??=[]).push(t)}else return Sr(t)}function Sr(t){return at(En|aa,t,!1)}function Ka(t){We.ensure();const e=at(pt|Nt,t,!0);return(n={})=>new Promise(r=>{n.outro?zt(e,()=>{Ee(e),r(void 0)}):(Ee(e),r(void 0))})}function Ja(t){return at(En,t,!1)}function Ga(t){return at(Cn|Nt,t,!0)}function Ln(t,e=0){return at(Dn|e,t,!0)}function q(t,e=[],n=[],r=[]){Ra(r,e,n,s=>{at(Dn,()=>t(...s.map(a)),!0)})}function Rn(t,e=0){var n=at(Qe|e,t,!0);return n}function Re(t){return at($e|Nt,t,!0)}function Er(t){var e=t.teardown;if(e!==null){const n=Dt,r=U;Mr(!0),De(null);try{e.call(null)}finally{Mr(n),De(r)}}}function Dr(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const s=n.ac;s!==null&&dn(()=>{s.abort(Lt)});var r=n.next;(n.f&pt)!==0?n.parent=null:Ee(n,e),n=r}}function Za(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&$e)===0&&Ee(e),e=n}}function Ee(t,e=!0){var n=!1;(e||(t.f&Qn)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Xa(t.nodes_start,t.nodes_end),n=!0),Dr(t,e&&!n),gn(t,0),ge(t,tt);var r=t.transitions;if(r!==null)for(const i of r)i.stop();Er(t);var s=t.parent;s!==null&&s.first!==null&&Tr(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function Xa(t,e){for(;t!==null;){var n=t===e?null:Zt(t);t.remove(),t=n}}function Tr(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function zt(t,e,n=!0){var r=[];Fn(t,r,!0),xr(r,()=>{n&&Ee(t),e&&e()})}function xr(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var s of t)s.out(r)}else e()}function Fn(t,e,n){if((t.f&Me)===0){if(t.f^=Me,t.transitions!==null)for(const l of t.transitions)(l.is_global||n)&&e.push(l);for(var r=t.first;r!==null;){var s=r.next,i=(r.f&It)!==0||(r.f&$e)!==0&&(t.f&Qe)!==0;Fn(r,e,i?n:!1),r=s}}}function On(t){Cr(t,!0)}function Cr(t,e){if((t.f&Me)!==0){t.f^=Me,(t.f&he)===0&&(ge(t,Pe),St(t));for(var n=t.first;n!==null;){var r=n.next,s=(n.f&It)!==0||(n.f&$e)!==0;Cr(n,s?e:!1),n=r}if(t.transitions!==null)for(const i of t.transitions)(i.is_global||e)&&i.in()}}function Pr(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var s=n===r?null:Zt(n);e.append(n),n=s}}let vt=!1;function _n(t){vt=t}let Dt=!1;function Mr(t){Dt=t}let U=null,Ye=!1;function De(t){U=t}let G=null;function He(t){G=t}let it=null;function Ar(t){U!==null&&(it===null?it=[t]:it.push(t))}let we=null,Ne=0,Fe=null;function Qa(t){Fe=t}let Ir=1,Xt=0,Tt=Xt;function Nr(t){Tt=t}function Lr(){return++Ir}function Qt(t){var e=t.f;if((e&Pe)!==0)return!0;if(e&ve&&(t.f&=~wt),(e&et)!==0){var n=t.deps;if(n!==null)for(var r=n.length,s=0;s<r;s++){var i=n[s];if(Qt(i)&&dr(i),i.wv>t.wv)return!0}(e&Ve)!==0&&Ie===null&&ge(t,he)}return!1}function Rr(t,e,n=!0){var r=t.reactions;if(r!==null&&!it?.includes(t))for(var s=0;s<r.length;s++){var i=r[s];(i.f&ve)!==0?Rr(i,e,!1):e===i&&(n?ge(i,Pe):(i.f&he)!==0&&ge(i,et),St(i))}}function Fr(t){var e=we,n=Ne,r=Fe,s=U,i=it,l=Ae,c=Ye,o=Tt,u=t.f;we=null,Ne=0,Fe=null,U=(u&($e|pt))===0?t:null,it=null,Rt(t.ctx),Ye=!1,Tt=++Xt,t.ac!==null&&(dn(()=>{t.ac.abort(Lt)}),t.ac=null);try{t.f|=xn;var f=t.fn,g=f(),v=t.deps;if(we!==null){var d;if(gn(t,Ne),v!==null&&Ne>0)for(v.length=Ne+we.length,d=0;d<we.length;d++)v[Ne+d]=we[d];else t.deps=v=we;if(vt&&hn()&&(t.f&Ve)!==0)for(d=Ne;d<v.length;d++)(v[d].reactions??=[]).push(t)}else v!==null&&Ne<v.length&&(gn(t,Ne),v.length=Ne);if(ar()&&Fe!==null&&!Ye&&v!==null&&(t.f&(ve|et|Pe))===0)for(d=0;d<Fe.length;d++)Rr(Fe[d],t);return s!==null&&s!==t&&(Xt++,Fe!==null&&(r===null?r=Fe:r.push(...Fe))),(t.f&ot)!==0&&(t.f^=ot),g}catch(m){return sr(m)}finally{t.f^=xn,we=e,Ne=n,Fe=r,U=s,it=i,Rt(l),Ye=c,Tt=o}}function $a(t,e){let n=e.reactions;if(n!==null){var r=Qr.call(n,t);if(r!==-1){var s=n.length-1;s===0?n=e.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(e.f&ve)!==0&&(we===null||!we.includes(e))&&(ge(e,et),(e.f&Ve)!==0&&(e.f^=Ve,e.f&=~wt),vr(e),gn(e,0))}function gn(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)$a(t,n[r])}function $t(t){var e=t.f;if((e&tt)===0){ge(t,he);var n=G,r=vt;G=t,vt=!0;try{(e&Qe)!==0?Za(t):Dr(t),Er(t);var s=Fr(t);t.teardown=typeof s=="function"?s:null,t.wv=Ir;var i}finally{vt=r,G=n}}}async function ei(){await Promise.resolve(),Pa()}function a(t){var e=t.f,n=(e&ve)!==0;if(U!==null&&!Ye){var r=G!==null&&(G.f&tt)!==0;if(!r&&!it?.includes(t)){var s=U.deps;if((U.f&xn)!==0)t.rv<Xt&&(t.rv=Xt,we===null&&s!==null&&s[Ne]===t?Ne++:we===null?we=[t]:we.includes(t)||we.push(t));else{(U.deps??=[]).push(t);var i=t.reactions;i===null?t.reactions=[U]:i.includes(U)||i.push(U)}}}if(Dt){if(ft.has(t))return ft.get(t);if(n){var l=t,c=l.v;return((l.f&he)===0&&l.reactions!==null||Br(l))&&(c=Mn(l)),ft.set(l,c),c}}else if(n){if(l=t,Ie?.has(l))return Ie.get(l);Qt(l)&&dr(l),vt&&hn()&&(l.f&Ve)===0&&Or(l)}else if(Ie?.has(t))return Ie.get(t);if((t.f&ot)!==0)throw t.v;return t.v}function Or(t){if(t.deps!==null){t.f^=Ve;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&ve)!==0&&(e.f&Ve)===0&&Or(e)}}function Br(t){if(t.v===_e)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(ft.has(e)||(e.f&ve)!==0&&Br(e))return!0;return!1}function en(t){var e=Ye;try{return Ye=!0,t()}finally{Ye=e}}const ti=-7169;function ge(t,e){t.f=t.f&ti|e}const ni=["touchstart","touchmove"];function ri(t){return ni.includes(t)}const jr=new Set,Bn=new Set;function ai(t,e,n,r={}){function s(i){if(r.capture||tn.call(e,i),!i.cancelBubble)return dn(()=>n?.call(this,i))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Ft(()=>{e.addEventListener(t,s,r)}):e.addEventListener(t,s,r),s}function jn(t,e,n,r,s){var i={capture:r,passive:s},l=ai(t,e,n,i);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&kr(()=>{e.removeEventListener(t,l,i)})}function xt(t){for(var e=0;e<t.length;e++)jr.add(t[e]);for(var n of Bn)n(t)}let zr=null;function tn(t){var e=this,n=e.ownerDocument,r=t.type,s=t.composedPath?.()||[],i=s[0]||t.target;zr=t;var l=0,c=zr===t&&t.__root;if(c){var o=s.indexOf(c);if(o!==-1&&(e===document||e===window)){t.__root=e;return}var u=s.indexOf(e);if(u===-1)return;o<=u&&(l=o)}if(i=s[l]||t.target,i!==e){$r(t,"currentTarget",{configurable:!0,get(){return i||n}});var f=U,g=G;De(null),He(null);try{for(var v,d=[];i!==null;){var m=i.assignedSlot||i.parentNode||i.host||null;try{var y=i["__"+r];y!=null&&(!i.disabled||t.target===i)&&y.call(i,t)}catch(_){v?d.push(_):v=_}if(t.cancelBubble||m===e||m===null)break;i=m}if(v){for(let _ of d)queueMicrotask(()=>{throw _});throw v}}finally{t.__root=e,delete t.currentTarget,De(f),He(g)}}}function ii(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function zn(t,e){var n=G;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function N(t,e){var n=(e&Ea)!==0,r,s=!t.startsWith("<!>");return()=>{r===void 0&&(r=ii(s?t:"<!>"+t),r=In(r));var i=n||br?document.importNode(r,!0):r.cloneNode(!0);return zn(i,i),i}}function qe(t=""){{var e=rt(t+"");return zn(e,e),e}}function Vt(){var t=document.createDocumentFragment(),e=document.createComment(""),n=rt();return t.append(e,n),zn(e,n),t}function E(t,e){t!==null&&t.before(e)}function W(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function Vr(t,e){return si(t,e)}const qt=new Map;function si(t,{target:e,anchor:n,props:r={},events:s,context:i,intro:l=!0}){Va();var c=new Set,o=g=>{for(var v=0;v<g.length;v++){var d=g[v];if(!c.has(d)){c.add(d);var m=ri(d);e.addEventListener(d,tn,{passive:m});var y=qt.get(d);y===void 0?(document.addEventListener(d,tn,{passive:m}),qt.set(d,1)):qt.set(d,y+1)}}};o(Sn(jr)),Bn.add(o);var u=void 0,f=Ka(()=>{var g=n??e.appendChild(rt());return Na(g,{pending:()=>{}},v=>{if(i){ut({});var d=Ae;d.c=i}s&&(r.$$events=s),u=t(v,r)||{},i&&ct()}),()=>{for(var v of c){e.removeEventListener(v,tn);var d=qt.get(v);--d===0?(document.removeEventListener(v,tn),qt.delete(v)):qt.set(v,d)}Bn.delete(o),g!==n&&g.parentNode?.removeChild(g)}});return li.set(u,f),u}let li=new WeakMap;class oi{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#o=!0;constructor(e,n=!0){this.anchor=e,this.#o=n}#i=()=>{var e=ee;if(this.#e.has(e)){var n=this.#e.get(e),r=this.#t.get(n);if(r)On(r),this.#n.delete(n);else{var s=this.#r.get(n);s&&(this.#t.set(n,s.effect),this.#r.delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[i,l]of this.#e){if(this.#e.delete(i),i===e)break;const c=this.#r.get(l);c&&(Ee(c.effect),this.#r.delete(l))}for(const[i,l]of this.#t){if(i===n||this.#n.has(i))continue;const c=()=>{if(Array.from(this.#e.values()).includes(i)){var u=document.createDocumentFragment();Pr(l,u),u.append(rt()),this.#r.set(i,{effect:l,fragment:u})}else Ee(l);this.#n.delete(i),this.#t.delete(i)};this.#o||!r?(this.#n.add(i),zt(l,c,!1)):c()}}};#a=e=>{this.#e.delete(e);const n=Array.from(this.#e.values());for(const[r,s]of this.#r)n.includes(r)||(Ee(s.effect),this.#r.delete(r))};ensure(e,n){var r=ee,s=pr();if(n&&!this.#t.has(e)&&!this.#r.has(e))if(s){var i=document.createDocumentFragment(),l=rt();i.append(l),this.#r.set(e,{effect:Re(()=>n(l)),fragment:i})}else this.#t.set(e,Re(()=>n(this.anchor)));if(this.#e.set(r,e),s){for(const[c,o]of this.#t)c===e?r.skipped_effects.delete(o):r.skipped_effects.add(o);for(const[c,o]of this.#r)c===e?r.skipped_effects.delete(o.effect):r.skipped_effects.add(o.effect);r.oncommit(this.#i),r.ondiscard(this.#a)}else this.#i()}}function O(t,e,n=!1){var r=new oi(t),s=n?It:0;function i(l,c){r.ensure(l,c)}Rn(()=>{var l=!1;e((c,o=!0)=>{l=!0,i(o,c)}),l||i(!1,null)},s)}function dt(t,e){return e}function ui(t,e,n){for(var r=[],s=e.length,i=0;i<s;i++)Fn(e[i].e,r,!0);xr(r,()=>{var l=r.length===0&&n!==null;if(l){var c=n,o=c.parentNode;qa(o),o.append(c),t.items.clear(),Je(t,e[0].prev,e[s-1].next)}for(var u=0;u<s;u++){var f=e[u];l||(t.items.delete(f.k),Je(t,f.prev,f.next)),Ee(f.e,!l)}t.first===e[0]&&(t.first=e[0].prev)})}function Ke(t,e,n,r,s,i=null){var l=t,c=new Map,o=null,u=(e&tr)!==0,f=(e&$n)!==0,g=(e&er)!==0;if(u){var v=t;l=v.appendChild(rt())}var d=null,m=fr(()=>{var P=n();return Kn(P)?P:P==null?[]:Sn(P)}),y,_=!0;function S(){ci(T,y,l,e,r),d!==null&&(y.length===0?(d.fragment?(l.before(d.fragment),d.fragment=null):On(d.effect),k.first=d.effect):zt(d.effect,()=>{d=null}))}var k=Rn(()=>{y=a(m);for(var P=y.length,D=new Set,L=ee,A=null,j=pr(),R=0;R<P;R+=1){var Z=y[R],se=r(Z,R),ne=_?null:c.get(se);ne?(f&&Bt(ne.v,Z),g?Bt(ne.i,R):ne.i=R,j&&L.skipped_effects.delete(ne.e)):(ne=fi(_?l:null,A,Z,se,R,s,e,n),_&&(ne.o=!0,A===null?o=ne:A.next=ne,A=ne),c.set(se,ne)),D.add(se)}if(P===0&&i&&!d)if(_)d={fragment:null,effect:Re(()=>i(l))};else{var de=document.createDocumentFragment(),be=rt();de.append(be),d={fragment:de,effect:Re(()=>i(be))}}if(!_)if(j){for(const[K,V]of c)D.has(K)||L.skipped_effects.add(V.e);L.oncommit(S),L.ondiscard(()=>{})}else S();a(m)}),T={effect:k,items:c,first:o};_=!1}function ci(t,e,n,r,s){var i=(r&ma)!==0,l=e.length,c=t.items,o=t.first,u,f=null,g,v=[],d=[],m,y,_,S;if(i)for(S=0;S<l;S+=1)m=e[S],y=s(m,S),_=c.get(y),_.a?.measure(),(g??=new Set).add(_);for(S=0;S<l;S+=1){if(m=e[S],y=s(m,S),_=c.get(y),t.first??=_,!_.o){_.o=!0;var k=f?f.next:o;Je(t,f,_),Je(t,_,k),Vn(_,k,n),f=_,v=[],d=[],o=f.next;continue}if((_.e.f&Me)!==0&&(On(_.e),i&&(_.a?.unfix(),(g??=new Set).delete(_))),_!==o){if(u!==void 0&&u.has(_)){if(v.length<d.length){var T=d[0],P;f=T.prev;var D=v[0],L=v[v.length-1];for(P=0;P<v.length;P+=1)Vn(v[P],T,n);for(P=0;P<d.length;P+=1)u.delete(d[P]);Je(t,D.prev,L.next),Je(t,f,D),Je(t,L,T),o=T,f=L,S-=1,v=[],d=[]}else u.delete(_),Vn(_,o,n),Je(t,_.prev,_.next),Je(t,_,f===null?t.first:f.next),Je(t,f,_),f=_;continue}for(v=[],d=[];o!==null&&o.k!==y;)(o.e.f&Me)===0&&(u??=new Set).add(o),d.push(o),o=o.next;if(o===null)continue;_=o}v.push(_),f=_,o=_.next}if(o!==null||u!==void 0){for(var A=u===void 0?[]:Sn(u);o!==null;)(o.e.f&Me)===0&&A.push(o),o=o.next;var j=A.length;if(j>0){var R=(r&tr)!==0&&l===0?n:null;if(i){for(S=0;S<j;S+=1)A[S].a?.measure();for(S=0;S<j;S+=1)A[S].a?.fix()}ui(t,A,R)}}i&&Ft(()=>{if(g!==void 0)for(_ of g)_.a?.apply()})}function fi(t,e,n,r,s,i,l,c){var o=(l&$n)!==0,u=(l&ya)===0,f=o?u?ja(n,!1,!1):Et(n):n,g=(l&er)===0?s:Et(s),v={i:g,v:f,k:r,a:null,e:null,o:!1,prev:e,next:null};try{if(t===null){var d=document.createDocumentFragment();d.append(t=rt())}return v.e=Re(()=>i(t,f,g,c)),e!==null&&(e.next=v),v}finally{}}function Vn(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,s=e?e.e.nodes_start:n,i=t.e.nodes_start;i!==null&&i!==r;){var l=Zt(i);s.before(i),i=l}}function Je(t,e,n){e===null?(t.first=n,t.effect.first=n&&n.e):(e.e.next&&(e.e.next.prev=null),e.next=n,e.e.next=n&&n.e),n===null?t.effect.last=e&&e.e:(n.e.prev&&(n.e.prev.next=null),n.prev=e,n.e.prev=e&&e.e)}const qr=[...` 	
\r\fÂ \v\uFEFF`];function vi(t,e,n){var r=t==null?"":""+t;if(n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var i=s.length,l=0;(l=r.indexOf(s,l))>=0;){var c=l+i;(l===0||qr.includes(r[l-1]))&&(c===r.length||qr.includes(r[c]))?r=(l===0?"":r.substring(0,l))+r.substring(c+1):l=c}}return r===""?null:r}function Ge(t,e,n,r,s,i){var l=t.__className;if(l!==n||l===void 0){var c=vi(n,r,i);c==null?t.removeAttribute("class"):t.className=c,t.__className=n}else if(i&&s!==i)for(var o in i){var u=!!i[o];(s==null||u!==!!s[o])&&t.classList.toggle(o,u)}return i}const di=Symbol("is custom element"),hi=Symbol("is html");function st(t,e,n,r){var s=_i(t);s[e]!==(s[e]=n)&&(e==="loading"&&(t[sa]=n),n==null?t.removeAttribute(e):typeof n!="string"&&gi(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function _i(t){return t.__attributes??={[di]:t.nodeName.includes("-"),[hi]:t.namespaceURI===Da}}var Ur=new Map;function gi(t){var e=t.getAttribute("is")||t.nodeName,n=Ur.get(e);if(n)return n;Ur.set(e,n=[]);for(var r,s=t,i=Element.prototype;i!==s;){r=ea(s);for(var l in r)r[l].set&&n.push(l);s=Jn(s)}return n}function bn(t,e,n=e){var r=new WeakSet;Wa(t,"input",async s=>{var i=s?t.defaultValue:t.value;if(i=qn(t)?Un(i):i,n(i),ee!==null&&r.add(ee),await ei(),i!==(i=e())){var l=t.selectionStart,c=t.selectionEnd,o=t.value.length;if(t.value=i??"",c!==null){var u=t.value.length;l===c&&c===o&&u>o?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=l,t.selectionEnd=Math.min(c,u))}}}),en(e)==null&&t.value&&(n(qn(t)?Un(t.value):t.value),ee!==null&&r.add(ee)),Ln(()=>{var s=e();if(t===document.activeElement){var i=un??ee;if(r.has(i))return}qn(t)&&s===Un(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function qn(t){var e=t.type;return e==="number"||e==="range"}function Un(t){return t===""?null:+t}function Wr(t,e){return t===e||t?.[Kt]===e}function bi(t={},e,n,r){return Ja(()=>{var s,i;return Ln(()=>{s=i,i=[],en(()=>{t!==n(...i)&&(e(t,...i),s&&Wr(n(...s),t)&&e(null,...s))})}),()=>{Ft(()=>{i&&Wr(n(...i),t)&&e(null,...i)})}}),t}let mn=!1;function mi(t){var e=mn;try{return mn=!1,[t(),mn]}finally{mn=e}}function Oe(t,e,n,r){var s=(n&ka)!==0,i=(n&Sa)!==0,l=r,c=!0,o=()=>(c&&(c=!1,l=i?en(r):r),l),u;if(s){var f=Kt in t||ia in t;u=At(t,e)?.set??(f&&e in t?k=>t[e]=k:void 0)}var g,v=!1;s?[g,v]=mi(()=>t[e]):g=t[e],g===void 0&&r!==void 0&&(g=o(),u&&(da(),u(g)));var d;if(d=()=>{var k=t[e];return k===void 0?o():(c=!0,k)},(n&wa)===0)return d;if(u){var m=t.$$legacy;return(function(k,T){return arguments.length>0?((!T||m||v)&&u(T?d():k),k):d()})}var y=!1,_=((n&pa)!==0?vn:fr)(()=>(y=!1,d()));s&&a(_);var S=G;return(function(k,T){if(arguments.length>0){const P=T?a(_):s?pe(k):k;return h(_,P),y=!0,l!==void 0&&(l=P),k}return Dt&&y||(S.f&tt)!==0?_.v:a(_)})}function yn(t){Ae===null&&la(),Nn(()=>{const e=en(t);if(typeof e=="function")return e})}const yi="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(yi);async function pi(t){if(typeof window>"u")throw new Error("Stripe.js can only be loaded in browser");return window.Stripe?window.Stripe(t):new Promise((e,n)=>{const r=document.createElement("script");r.src="https://js.stripe.com/v3/",r.async=!0,r.onload=()=>{window.Stripe?e(window.Stripe(t)):n(new Error("Stripe.js failed to load"))},r.onerror=()=>{n(new Error("Failed to load Stripe.js"))},document.head.appendChild(r)})}async function wi(t){const e=await fetch("/api/stripe/payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to create payment intent")}return e.json()}async function ki(t,e,n,r){const{error:s,paymentIntent:i}=await t.confirmPayment({elements:e,clientSecret:n,confirmParams:{payment_method_data:{billing_details:{name:r.name,email:r.email}}},redirect:"if_required"});return s?{success:!1,reservationId:"",error:s.message}:i&&i.status==="succeeded"?{success:!0,reservationId:i.metadata?.reservation_id||"",paymentIntentId:i.id}:{success:!1,reservationId:"",error:"Payment was not successful"}}function Si(t,e,n="dark"){const r={theme:n==="dark"?"night":"stripe",variables:{colorPrimary:n==="dark"?"#ffffff":"#000000",colorBackground:n==="dark"?"#1a1a1a":"#ffffff",colorText:n==="dark"?"#ffffff":"#000000",colorDanger:"#d44d4d",fontFamily:"Stack Sans Notch, system-ui, sans-serif",spacingUnit:"4px",borderRadius:"8px"},rules:{".Input":{backgroundColor:n==="dark"?"#111111":"#f5f5f5",border:n==="dark"?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"none"},".Input:focus":{borderColor:n==="dark"?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.3)"},".Label":{fontSize:"14px",fontWeight:"500"}}};return t.elements({clientSecret:e,appearance:r})}var Ei=N('<div class="loading-state svelte-1e5ovyn"><div class="spinner svelte-1e5ovyn"></div> <p>Loading payment form...</p></div>'),Di=N('<div class="error-message svelte-1e5ovyn"> </div>'),Ti=N('<form class="payment-form svelte-1e5ovyn"><div id="payment-element" class="payment-element svelte-1e5ovyn"></div> <!> <div class="actions svelte-1e5ovyn"><button type="button" class="cancel-btn svelte-1e5ovyn">Cancel</button> <button type="submit" class="pay-btn svelte-1e5ovyn"><!></button></div> <p class="secure-note svelte-1e5ovyn"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg> Secured by Stripe</p></form>'),xi=N('<div class="checkout-form svelte-1e5ovyn"><div class="summary svelte-1e5ovyn"><h3 class="svelte-1e5ovyn">Confirm & Pay</h3> <div class="details svelte-1e5ovyn"><div class="detail-row svelte-1e5ovyn"><strong> </strong> <span class="facility svelte-1e5ovyn"> </span></div> <div class="detail-row svelte-1e5ovyn"><span class="time svelte-1e5ovyn"> </span></div> <div class="detail-row total svelte-1e5ovyn"><span>Total</span> <strong class="amount svelte-1e5ovyn"> </strong></div></div></div> <!> <!></div>');function Yr(t,e){ut(e,!0);let n=Oe(e,"theme",3,"dark"),r=M(!0),s=M(!1),i=M(null),l=M(null),c=M(null),o=M(null),u=M(null);function f(K){const oe=new Date(K).getHours(),Be=oe>=12?"PM":"AM";return`${oe%12||12} ${Be}`}async function g(){h(r,!0),h(i,null);try{h(l,await pi(e.stripePublishableKey),!0);const K=await wi({reservationId:e.reservationId});if(h(u,K.clientSecret,!0),h(c,Si(a(l),a(u),n()),!0),h(o,a(c).create("payment",{layout:{type:"accordion",defaultCollapsed:!1,radios:!1,spacedAccordionItems:!0}}),!0),await new Promise(oe=>setTimeout(oe,100)),document.getElementById("payment-element"))a(o).mount("#payment-element");else throw new Error("Payment element container not found")}catch(K){const V=K instanceof Error?K.message:"Failed to initialize payment";h(i,V,!0),e.onError?.(K instanceof Error?K:new Error(V))}finally{h(r,!1)}}async function v(K){if(K.preventDefault(),!a(l)||!a(c)||!a(u)){h(i,"Payment system not initialized");return}h(s,!0),h(i,null);try{const V=await ki(a(l),a(c),a(u),{name:e.memberName,email:e.memberEmail});V.success?e.onSuccess?.(V):h(i,V.error||"Payment failed",!0)}catch(V){const oe=V instanceof Error?V.message:"Payment failed";h(i,oe,!0),e.onError?.(V instanceof Error?V:new Error(oe))}finally{h(s,!1)}}yn(()=>{g()});var d=xi(),m=b(d),y=w(b(m),2),_=b(y),S=b(_),k=b(S),T=w(S,2),P=b(T),D=w(_,2),L=b(D),A=b(L),j=w(D,2),R=w(b(j),2),Z=b(R),se=w(m,2);{var ne=K=>{var V=Ei();E(K,V)};O(se,K=>{a(r)&&K(ne)})}var de=w(se,2);{var be=K=>{var V=Ti(),oe=w(b(V),2);{var Be=x=>{var B=Di(),X=b(B);q(()=>W(X,a(i))),E(x,B)};O(oe,x=>{a(i)&&x(Be)})}var ht=w(oe,2),Ue=b(ht);Ue.__click=function(...x){e.onCancel?.apply(this,x)};var Ut=w(Ue,2),rn=b(Ut);{var Wt=x=>{var B=qe("Processing...");E(x,B)},Yt=x=>{var B=qe();q(X=>W(B,`Pay $${X??""}`),[()=>(e.priceCents/100).toFixed(2)]),E(x,B)};O(rn,x=>{a(s)?x(Wt):x(Yt,!1)})}q(()=>{Ue.disabled=a(s),Ut.disabled=a(s)||a(r)}),jn("submit",V,v),E(K,V)};O(de,K=>{a(r)||K(be)})}q((K,V,oe)=>{st(d,"data-theme",n()),W(k,e.courtName),W(P,e.facilityName),W(A,`${K??""} - ${V??""}`),W(Z,`$${oe??""}`)},[()=>f(e.startTime),()=>f(e.endTime),()=>(e.priceCents/100).toFixed(2)]),E(t,d),ct()}xt(["click"]);function Ze(t){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`}function nn(t,e){const n=new Date(t);return n.setDate(n.getDate()+e),n}function Hr(t){const e=new Date(t),n=e.getDay(),r=n===0?6:n-1;return e.setDate(e.getDate()-r),e}function Ci(t){const e=Hr(t);return Array.from({length:7},(n,r)=>nn(e,r))}function Pi(t){return new Date(t.getFullYear(),t.getMonth(),1)}function Mi(t){const e=Pi(t);new Date(t.getFullYear(),t.getMonth()+1,0);const n=Hr(e),r=[];let s=n;for(let i=0;i<42;i++)r.push(new Date(s)),s=nn(s,1);return r}function Kr(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function Ai(t){return Kr(t,new Date)}function Ii(t,e,n){return t.getMonth()===e&&t.getFullYear()===n}function Ni(t,e=!0){const n={weekday:e?"short":"long"};return t.toLocaleDateString("en-US",n)}function Li(t){return t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}function Jr(t){return t.toLocaleDateString("en-US",{month:"long",year:"numeric"})}var Ri=N('<span class="day-name svelte-128zuao"> </span>'),Fi=N('<span class="skeleton svelte-128zuao" aria-busy="true"></span>'),Oi=N("<span> </span>"),Bi=N('<button><!> <span class="date-number svelte-128zuao"> </span> <!></button>');function Gr(t,e){ut(e,!0);let n=Oe(e,"compact",3,!1),r=Oe(e,"showDayName",3,!0),s=F(()=>()=>{if(e.loading||!e.availability)return"loading";if(e.availability.availableSlots===0)return"none";const k=e.availability.availableSlots/e.availability.totalSlots;return k<.25?"low":k<.5?"medium":"high"}),i=F(()=>()=>e.availability?e.availability.availableSlots===0?"Full":`${e.availability.availableSlots}`:""),l=F(()=>Ai(e.date)),c=F(()=>Ni(e.date,!0)),o=F(()=>e.date.getDate());var u=Bi();let f;u.__click=function(...k){e.onclick?.apply(this,k)};var g=b(u);{var v=k=>{var T=Ri(),P=b(T);q(()=>W(P,a(c))),E(k,T)};O(g,k=>{r()&&k(v)})}var d=w(g,2),m=b(d),y=w(d,2);{var _=k=>{var T=Fi();E(k,T)},S=k=>{var T=Vt(),P=jt(T);{var D=L=>{var A=Oi();let j;var R=b(A);q(Z=>{j=Ge(A,1,"slot-count svelte-128zuao",null,j,{full:e.availability.availableSlots===0}),W(R,Z)},[()=>a(i)()]),E(L,A)};O(P,L=>{e.availability&&L(D)},!0)}E(k,T)};O(y,k=>{e.loading?k(_):k(S,!1)})}q((k,T)=>{f=Ge(u,1,"day-cell svelte-128zuao",null,f,{selected:e.selected,disabled:e.disabled,loading:e.loading,today:a(l),compact:n()}),st(u,"data-availability",k),u.disabled=e.disabled,st(u,"aria-selected",e.selected),st(u,"aria-disabled",e.disabled),st(u,"aria-label",`${a(c)??""}, ${T??""}, ${e.availability?`${e.availability.availableSlots} slots available`:"loading"}`),W(m,a(o))},[()=>a(s)(),()=>e.date.toLocaleDateString("en-US",{month:"long",day:"numeric"})]),E(t,u),ct()}xt(["click"]);var ji=N('<span class="day-header svelte-1ei154l"> </span>'),zi=N('<div class="loading-overlay svelte-1ei154l" aria-live="polite"><span class="sr-only svelte-1ei154l">Loading availability...</span></div>'),Vi=N('<div class="week-view svelte-1ei154l"><header class="week-header svelte-1ei154l"><button class="nav-btn svelte-1ei154l" aria-label="Previous week"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true"><path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <div class="header-center svelte-1ei154l"><h2 class="month-year svelte-1ei154l"> </h2> <button class="today-btn svelte-1ei154l">Today</button></div> <button class="nav-btn svelte-1ei154l" aria-label="Next week"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true"><path d="M7.5 5L12.5 10L7.5 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></header> <div class="day-headers svelte-1ei154l" aria-hidden="true"></div> <div class="week-grid svelte-1ei154l" role="grid" aria-label="Week calendar"></div> <!></div>');function qi(t,e){ut(e,!0);let n=M(!1),r=F(()=>e.calendar.visibleDates),s=F(()=>Jr(e.calendar.focusDate));const i=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];async function l(){h(n,!0);try{await e.availabilityCache.fetchDates(a(r))}finally{h(n,!1)}}function c(A){e.calendar.isBookable(A)&&(e.calendar.selectDate(A),e.onDateSelect?.(A))}function o(){e.calendar.navigatePrevious(),l()}function u(){e.calendar.navigateNext(),l()}function f(){e.calendar.navigateToday(),l()}yn(()=>{l()});var g=Vi(),v=b(g),d=b(v);d.__click=o;var m=w(d,2),y=b(m),_=b(y),S=w(y,2);S.__click=f;var k=w(m,2);k.__click=u;var T=w(v,2);Ke(T,21,()=>i,dt,(A,j)=>{var R=ji(),Z=b(R);q(()=>W(Z,a(j))),E(A,R)});var P=w(T,2);Ke(P,23,()=>a(r),A=>A.toISOString(),(A,j)=>{const R=F(()=>e.availabilityCache.get(a(j))),Z=F(()=>e.availabilityCache.isPending(a(j))),se=F(()=>e.calendar.isBookable(a(j))),ne=F(()=>e.calendar.isSelected(a(j)));{let de=F(()=>!a(se)),be=F(()=>a(Z)||a(n)&&!a(R));Gr(A,{get date(){return a(j)},get availability(){return a(R)},get selected(){return a(ne)},get disabled(){return a(de)},get loading(){return a(be)},showDayName:!0,onclick:()=>c(a(j))})}});var D=w(P,2);{var L=A=>{var j=zi();E(A,j)};O(D,A=>{a(n)&&A(L)})}q(()=>W(_,a(s))),E(t,g),ct()}xt(["click"]);var Ui=N('<span class="day-header svelte-9t42k5"> </span>'),Wi=N("<div><!></div>"),Yi=N('<div class="loading-overlay svelte-9t42k5" aria-live="polite"><span class="sr-only svelte-9t42k5">Loading availability...</span></div>'),Hi=N('<div class="month-view svelte-9t42k5"><header class="month-header svelte-9t42k5"><button class="nav-btn svelte-9t42k5" aria-label="Previous month"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true"><path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <div class="header-center svelte-9t42k5"><h2 class="month-year svelte-9t42k5"> </h2> <button class="today-btn svelte-9t42k5">Today</button></div> <button class="nav-btn svelte-9t42k5" aria-label="Next month"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true"><path d="M7.5 5L12.5 10L7.5 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></header> <div class="day-headers svelte-9t42k5" aria-hidden="true"></div> <div class="month-grid svelte-9t42k5" role="grid" aria-label="Month calendar"></div> <!></div>');function Ki(t,e){ut(e,!0);let n=M(!1),r=F(()=>e.calendar.visibleDates),s=F(()=>Jr(e.calendar.focusDate)),i=F(()=>e.calendar.focusDate.getMonth()),l=F(()=>e.calendar.focusDate.getFullYear());const c=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];async function o(){h(n,!0);try{await e.availabilityCache.fetchDates(a(r))}finally{h(n,!1)}}function u(R){e.calendar.isBookable(R)&&(e.calendar.selectDate(R),e.onDateSelect?.(R))}function f(){e.calendar.navigatePrevious(),o()}function g(){e.calendar.navigateNext(),o()}function v(){e.calendar.navigateToday(),o()}yn(()=>{o()});var d=Hi(),m=b(d),y=b(m);y.__click=f;var _=w(y,2),S=b(_),k=b(S),T=w(S,2);T.__click=v;var P=w(_,2);P.__click=g;var D=w(m,2);Ke(D,21,()=>c,dt,(R,Z)=>{var se=Ui(),ne=b(se);q(()=>W(ne,a(Z))),E(R,se)});var L=w(D,2);Ke(L,23,()=>a(r),R=>R.toISOString(),(R,Z)=>{const se=F(()=>e.availabilityCache.get(a(Z))),ne=F(()=>e.availabilityCache.isPending(a(Z))),de=F(()=>e.calendar.isBookable(a(Z))),be=F(()=>e.calendar.isSelected(a(Z))),K=F(()=>Ii(a(Z),a(i),a(l)));var V=Wi();let oe;var Be=b(V);{let ht=F(()=>!a(de)),Ue=F(()=>a(ne)||a(n)&&!a(se));Gr(Be,{get date(){return a(Z)},get availability(){return a(se)},get selected(){return a(be)},get disabled(){return a(ht)},get loading(){return a(Ue)},compact:!0,showDayName:!1,onclick:()=>u(a(Z))})}q(()=>oe=Ge(V,1,"day-wrapper svelte-9t42k5",null,oe,{"outside-month":!a(K)})),E(R,V)});var A=w(L,2);{var j=R=>{var Z=Yi();E(R,Z)};O(A,R=>{a(n)&&R(j)})}q(()=>W(k,a(s))),E(t,d),ct()}xt(["click"]);var Ji=N('<div class="view-toggle svelte-65x1st" role="tablist" aria-label="Calendar view"><button role="tab">Week</button> <button role="tab">Month</button></div>');function Gi(t,e){ut(e,!0);function n(o){o!==e.value&&e.onchange?.(o)}var r=Ji(),s=b(r);let i;s.__click=()=>n("week");var l=w(s,2);let c;l.__click=()=>n("month"),q(()=>{i=Ge(s,1,"toggle-btn svelte-65x1st",null,i,{selected:e.value==="week"}),st(s,"aria-selected",e.value==="week"),c=Ge(l,1,"toggle-btn svelte-65x1st",null,c,{selected:e.value==="month"}),st(l,"aria-selected",e.value==="month")}),E(t,r),ct()}xt(["click"]);function Zi(t){let e=M("week"),n=M(pe(new Date)),r=M(null),s=M(null),i=M(pe(t.advanceBookingDays)),l=M(pe(t.timezone));function c(){return a(e)==="week"?Ci(a(n)):Mi(a(n))}function o(){const D=new Date;D.setHours(0,0,0,0);const L=nn(D,a(i));return L.setHours(23,59,59,999),{min:D,max:L}}function u(D){const L=o(),A=new Date(D);return A.setHours(12,0,0,0),A>=L.min&&A<=L.max}function f(D){h(e,D,!0)}function g(){if(a(e)==="week")h(n,nn(a(n),-7),!0);else{const D=new Date(a(n));D.setMonth(D.getMonth()-1),h(n,D,!0)}}function v(){if(a(e)==="week")h(n,nn(a(n),7),!0);else{const D=new Date(a(n));D.setMonth(D.getMonth()+1),h(n,D,!0)}}function d(){h(n,new Date,!0),h(r,new Date,!0)}function m(D){h(r,D,!0),h(s,null)}function y(D,L){h(s,`${D}::${L}`)}function _(){h(s,null)}function S(){h(r,null),h(s,null)}function k(D){return a(r)?Kr(D,a(r)):!1}function T(){if(!a(s))return null;const[D,L]=a(s).split("::");return{courtId:D,startTime:L}}function P(D){D.advanceBookingDays!==void 0&&h(i,D.advanceBookingDays,!0),D.timezone!==void 0&&h(l,D.timezone,!0)}return{get view(){return a(e)},get focusDate(){return a(n)},get selectedDate(){return a(r)},get selectedSlot(){return a(s)},get advanceBookingDays(){return a(i)},get timezone(){return a(l)},get visibleDates(){return c()},get bookableRange(){return o()},setView:f,navigatePrevious:g,navigateNext:v,navigateToday:d,selectDate:m,selectSlot:y,clearSlot:_,clearSelection:S,isSelected:k,isBookable:u,parseSelectedSlot:T,updateConfig:P}}const Xi=300*1e3;function Qi(t,e){let n=pe(new Map),r=pe(new Set),s=M(null),i=M(null);function l(y){return Date.now()-y.fetchedAt<Xi}function c(y){const _=Ze(y),S=n.get(_);return S&&l(S)?S:null}function o(y){return r.has(Ze(y))}function u(y){let _=0,S=0;for(const k of y)for(const T of k.slots)_++,T.status==="available"&&S++;return{totalSlots:_,availableSlots:S}}async function f(y){const _=Ze(y),S=c(y);if(S)return S;if(r.has(_))return new Promise(k=>{const T=setInterval(()=>{r.has(_)||(clearInterval(T),k(n.get(_)||null))},50);setTimeout(()=>{clearInterval(T),k(null)},1e4)});r.add(_),h(i,null);try{const k=new URLSearchParams;k.set("facility",t),k.set("date",_);const T=await fetch(`${e}/availability?${k.toString()}`);if(!T.ok)throw new Error(`Failed to fetch availability: ${T.statusText}`);const P=await T.json();P.facility&&!a(s)&&h(s,P.facility,!0);const D=P.courts||[],L=u(D),A={date:_,...L,courts:D,fetchedAt:Date.now()};return n.set(_,A),A}catch(k){return h(i,k instanceof Error?k.message:"Failed to fetch availability",!0),null}finally{r.delete(_)}}async function g(y){const _=new Map,S=y.filter(T=>{const P=Ze(T),D=n.get(P);return!D||!l(D)});if(S.length===0){for(const T of y){const P=n.get(Ze(T));P&&_.set(Ze(T),P)}return _}const k=S.map(T=>f(T));await Promise.allSettled(k);for(const T of y){const P=n.get(Ze(T));P&&_.set(Ze(T),P)}return _}function v(y){n.delete(Ze(y))}function d(){n.clear()}function m(){return{size:n.size,pending:r.size}}return{get cache(){return n},get facility(){return a(s)},get lastError(){return a(i)},get isLoading(){return r.size>0},get:c,isPending:o,fetchDate:f,fetchDates:g,invalidate:v,invalidateAll:d,getStats:m}}var $i=N('<div class="calendar-view svelte-1icuogf"><div class="view-toggle-wrapper svelte-1icuogf"><!></div> <!></div>'),es=N('<p class="availability-summary svelte-1icuogf"> </p>'),ts=N('<span class="price svelte-1icuogf"> </span>'),ns=N('<button><span class="time svelte-1icuogf"> </span> <!></button>'),rs=N('<div class="court svelte-1icuogf"><h4 class="svelte-1icuogf"> </h4> <div class="slots svelte-1icuogf"></div></div>'),as=N('<div class="courts svelte-1icuogf"></div>'),is=N('<div class="empty svelte-1icuogf"><p>No courts available for this date.</p></div>'),ss=N('<div class="slots-view svelte-1icuogf"><header class="slots-header svelte-1icuogf"><button class="back-btn svelte-1icuogf" aria-label="Back to calendar"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true"><path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <h2 class="date-header svelte-1icuogf"><!></h2></header> <!> <!></div>'),ls=N('<span class="amount svelte-1icuogf"> </span>'),os=N('<div class="booking svelte-1icuogf"><div class="details svelte-1icuogf"><strong class="svelte-1icuogf"> </strong> <span class="svelte-1icuogf"> </span> <!></div> <div class="actions svelte-1icuogf"><button class="cancel svelte-1icuogf">Cancel</button> <button class="book svelte-1icuogf"><!></button></div></div>'),us=N('<div class="user-info-form svelte-1icuogf"><h3 class="svelte-1icuogf">Your Information</h3> <form class="svelte-1icuogf"><div class="field svelte-1icuogf"><label for="name" class="svelte-1icuogf">Name</label> <input type="text" id="name" placeholder="John Smith" required class="svelte-1icuogf"/></div> <div class="field svelte-1icuogf"><label for="email" class="svelte-1icuogf">Email</label> <input type="email" id="email" placeholder="you@example.com" required class="svelte-1icuogf"/></div> <div class="form-actions svelte-1icuogf"><button type="button" class="cancel svelte-1icuogf">Cancel</button> <button type="submit" class="book svelte-1icuogf"><!></button></div></form></div>'),cs=N('<div class="error-banner svelte-1icuogf"><p> </p></div>'),fs=N('<div class="calendar-widget svelte-1icuogf"><!> <!> <!> <!></div>');function vs(t,e){ut(e,!0);let n=Oe(e,"theme",3,"dark"),r=Oe(e,"advanceBookingDays",3,30),s=Oe(e,"timezone",3,"America/Chicago");const i=typeof window<"u"&&window.location.hostname==="localhost"?"http://localhost:5173/api":typeof window<"u"&&window.location.hostname.includes("clearway")?"/api":"https://clearway.pages.dev/api",l=Zi({advanceBookingDays:r(),timezone:s()}),c=Qi(e.facilitySlug,i);let o=M("calendar"),u=M(null),f=M(null),g=M(null),v=M(!1),d=M(!1),m=M(null),y=M(""),_=M(""),S=F(()=>()=>l.selectedDate?c.get(l.selectedDate)?.courts||[]:[]),k=F(()=>c.facility?.name||e.facilitySlug);function T(x){l.setView(x)}function P(x){const X=new Date(x).getHours(),p=X>=12?"PM":"AM";return`${X%12||12} ${p}`}function D(x){h(o,"slots")}function L(){h(o,"calendar"),j()}function A(x,B){B.status==="available"&&(h(u,x,!0),h(f,B,!0),h(g,`${x}::${B.startTime}`),l.selectSlot(x,B.startTime))}function j(){h(u,null),h(f,null),h(g,null),l.clearSlot()}function R(){!a(y)||!a(_)?h(v,!0):Z()}async function Z(){if(!(!a(u)||!a(f)||!l.selectedDate)){h(d,!0);try{if(!a(S)().find(C=>C.id===a(u)))throw new Error("Court not found");const X=await fetch(`${i}/book`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({facility_slug:e.facilitySlug,court_id:a(u),date:Ze(l.selectedDate),start_time:a(f).startTime,member_email:a(_),member_name:a(y)})});if(!X.ok){const C=await X.json();throw new Error(C.message||"Failed to create reservation")}const p=await X.json();h(m,p.id,!0),h(v,!0)}catch(x){const B=x instanceof Error?x.message:"Booking failed";e.onError?.(x instanceof Error?x:new Error(B))}finally{h(d,!1)}}}function se(x){if(h(v,!1),e.onReservationComplete&&a(u)&&a(f)){const X=a(S)().find(p=>p.id===a(u));e.onReservationComplete({id:a(m)||"",court:X?.name||"",start:a(f).startTime,end:a(f).endTime,price:a(f).priceCents||0})}j(),L(),l.selectedDate&&c.invalidate(l.selectedDate)}function ne(x){e.onError?.(x)}function de(){h(v,!1),h(y,""),h(_,""),h(m,null)}var be=fs(),K=b(be);{var V=x=>{var B=$i(),X=b(B),p=b(X);Gi(p,{get value(){return l.view},onchange:T});var C=w(X,2);{var H=re=>{qi(re,{get calendar(){return l},get availabilityCache(){return c},onDateSelect:D})},te=re=>{Ki(re,{get calendar(){return l},get availabilityCache(){return c},onDateSelect:D})};O(C,re=>{l.view==="week"?re(H):re(te,!1)})}E(x,B)},oe=x=>{var B=ss(),X=b(B),p=b(X);p.__click=L;var C=w(p,2),H=b(C);{var te=le=>{var J=qe();q(Se=>W(J,Se),[()=>Li(l.selectedDate)]),E(le,J)};O(H,le=>{l.selectedDate&&le(te)})}var re=w(X,2);{var ke=le=>{const J=F(()=>c.get(l.selectedDate));var Se=Vt(),gt=jt(Se);{var Xe=ae=>{var me=es(),bt=b(me);q(()=>W(bt,`${a(J).availableSlots??""} slot${a(J).availableSlots===1?"":"s"} available`)),E(ae,me)};O(gt,ae=>{a(J)&&ae(Xe)})}E(le,Se)};O(re,le=>{l.selectedDate&&le(ke)})}var lt=w(re,2);{var Ct=le=>{const J=F(()=>a(S)());var Se=as();Ke(Se,21,()=>a(J),dt,(gt,Xe)=>{var ae=rs(),me=b(ae),bt=b(me),an=w(me,2);Ke(an,21,()=>a(Xe).slots,dt,(Wn,je)=>{var Pt=ns();let wn;Pt.__click=()=>A(a(Xe).id,a(je));var kn=b(Pt),Yn=b(kn),I=w(kn,2);{var z=Y=>{var Q=ts(),$=b(Q);q(ie=>W($,`$${ie??""}`),[()=>(a(je).priceCents/100).toFixed(0)]),E(Y,Q)};O(I,Y=>{a(je).priceCents!==null&&Y(z)})}q(Y=>{wn=Ge(Pt,1,"slot svelte-1icuogf",null,wn,{available:a(je).status==="available",peak:a(je).priceCents!==null&&a(je).priceCents>4e3,selected:a(g)===`${a(Xe).id}::${a(je).startTime}`}),Pt.disabled=a(je).status!=="available",W(Yn,Y)},[()=>P(a(je).startTime)]),E(Wn,Pt)}),q(()=>W(bt,a(Xe).name)),E(gt,ae)}),E(le,Se)},_t=le=>{var J=is();E(le,J)};O(lt,le=>{a(S)().length>0?le(Ct):le(_t,!1)})}E(x,B)};O(K,x=>{a(o)==="calendar"?x(V):x(oe,!1)})}var Be=w(K,2);{var ht=x=>{const B=F(()=>a(S)()),X=F(()=>a(B).find(ae=>ae.id===a(u)));var p=os(),C=b(p),H=b(C),te=b(H),re=w(H,2),ke=b(re),lt=w(re,2);{var Ct=ae=>{var me=ls(),bt=b(me);q(an=>W(bt,`$${an??""}`),[()=>(a(f).priceCents/100).toFixed(0)]),E(ae,me)};O(lt,ae=>{a(f).priceCents&&ae(Ct)})}var _t=w(C,2),le=b(_t);le.__click=j;var J=w(le,2);J.__click=R;var Se=b(J);{var gt=ae=>{var me=qe("Loading...");E(ae,me)},Xe=ae=>{var me=qe("Book");E(ae,me)};O(Se,ae=>{a(d)?ae(gt):ae(Xe,!1)})}q((ae,me)=>{W(te,a(X)?.name),W(ke,`${ae??""} - ${me??""}`),J.disabled=a(d)},[()=>P(a(f).startTime),()=>P(a(f).endTime)]),E(x,p)};O(Be,x=>{a(f)&&a(u)&&!a(v)&&x(ht)})}var Ue=w(Be,2);{var Ut=x=>{var B=us(),X=w(b(B),2),p=b(X),C=w(b(p),2),H=w(p,2),te=w(b(H),2),re=w(H,2),ke=b(re);ke.__click=de;var lt=w(ke,2),Ct=b(lt);{var _t=J=>{var Se=qe("Creating...");E(J,Se)},le=J=>{var Se=qe("Continue");E(J,Se)};O(Ct,J=>{a(d)?J(_t):J(le,!1)})}q(()=>{C.disabled=a(d),te.disabled=a(d),ke.disabled=a(d),lt.disabled=a(d)}),jn("submit",X,J=>{J.preventDefault(),Z()}),bn(C,()=>a(y),J=>h(y,J)),bn(te,()=>a(_),J=>h(_,J)),E(x,B)},rn=x=>{var B=Vt(),X=jt(B);{var p=C=>{const H=F(()=>a(S)()),te=F(()=>a(H).find(re=>re.id===a(u)));{let re=F(()=>a(te)?.name||""),ke=F(()=>a(f).priceCents||0);Yr(C,{get reservationId(){return a(m)},get courtName(){return a(re)},get facilityName(){return a(k)},get startTime(){return a(f).startTime},get endTime(){return a(f).endTime},get priceCents(){return a(ke)},get memberName(){return a(y)},get memberEmail(){return a(_)},get theme(){return n()},get stripePublishableKey(){return e.stripePublishableKey},onSuccess:se,onError:ne,onCancel:de})}};O(X,C=>{a(v)&&a(m)&&a(f)&&a(u)&&e.stripePublishableKey&&C(p)},!0)}E(x,B)};O(Ue,x=>{a(v)&&!a(m)?x(Ut):x(rn,!1)})}var Wt=w(Ue,2);{var Yt=x=>{var B=cs(),X=b(B),p=b(X);q(()=>W(p,c.lastError)),E(x,B)};O(Wt,x=>{c.lastError&&x(Yt)})}q(()=>st(be,"data-theme",n())),E(t,be),ct()}xt(["click"]);var ds=N('<button><span class="day-name svelte-fbbhu1"> </span> <span class="day-num svelte-fbbhu1"> </span></button>'),hs=N("<button> </button>"),_s=N('<button class="filter-clear svelte-fbbhu1">Show All</button>'),gs=N('<div class="location-filter svelte-fbbhu1"><!> <!></div>'),bs=N('<div class="loading svelte-fbbhu1"><div class="spinner svelte-fbbhu1"></div> <p>Loading...</p></div>'),ms=N('<div class="error svelte-fbbhu1"><p> </p> <button class="svelte-fbbhu1">Retry</button></div>'),ys=N('<span class="price svelte-fbbhu1"> </span>'),ps=N('<button><span class="time svelte-fbbhu1"> </span> <!></button>'),ws=N('<div class="court svelte-fbbhu1"><h4 class="svelte-fbbhu1"> </h4> <div class="slots svelte-fbbhu1"></div></div>'),ks=N('<div class="courts svelte-fbbhu1"></div>'),Ss=N('<div class="empty svelte-fbbhu1"><p>No courts available.</p></div>'),Es=N('<div class="empty svelte-fbbhu1"><p>No courts match your filter.</p> <button class="filter-clear svelte-fbbhu1">Show All Courts</button></div>'),Ds=N('<span class="amount svelte-fbbhu1"> </span>'),Ts=N('<div class="booking svelte-fbbhu1"><div class="details svelte-fbbhu1"><strong class="svelte-fbbhu1"> </strong> <span class="svelte-fbbhu1"> </span> <!></div> <div class="actions svelte-fbbhu1"><button class="cancel svelte-fbbhu1">Cancel</button> <button class="book svelte-fbbhu1"><!></button></div></div>'),xs=N('<div class="user-info-form svelte-fbbhu1"><h3 class="svelte-fbbhu1">Your Information</h3> <form class="svelte-fbbhu1"><div class="field svelte-fbbhu1"><label for="name" class="svelte-fbbhu1">Name</label> <input type="text" id="name" placeholder="John Smith" required class="svelte-fbbhu1"/></div> <div class="field svelte-fbbhu1"><label for="email" class="svelte-fbbhu1">Email</label> <input type="email" id="email" placeholder="you@example.com" required class="svelte-fbbhu1"/></div> <div class="form-actions svelte-fbbhu1"><button type="button" class="cancel svelte-fbbhu1">Cancel</button> <button type="submit" class="book svelte-fbbhu1"><!></button></div></form></div>'),Cs=N('<div><div class="week-header svelte-fbbhu1"><h3 class="svelte-fbbhu1">Book a Court</h3> <div class="week-nav svelte-fbbhu1"><button class="nav-btn svelte-fbbhu1" aria-label="Previous week"><svg width="16" height="16" viewBox="0 0 20 20" fill="none"><path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <div class="week-days svelte-fbbhu1"></div> <button class="nav-btn svelte-fbbhu1" aria-label="Next week"><svg width="16" height="16" viewBox="0 0 20 20" fill="none"><path d="M7.5 5L12.5 10L7.5 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div></div> <!> <!> <!> <!> <!> <!> <!></div>');function Zr(t,e){ut(e,!0);let n=Oe(e,"theme",3,"dark"),r=Oe(e,"view",3,"slots"),s=Oe(e,"date",31,()=>pe(new Date().toISOString().split("T")[0])),i=Oe(e,"advanceBookingDays",3,30),l=Oe(e,"timezone",3,"America/Chicago"),c=Oe(e,"embedded",3,!1),o=M(!0),u=M(null),f=M(pe([])),g=M(null),v=M(null),d=M(null),m=M(pe(new Set));function y(p){const C=p.match(/^(.+?)\s+Court/i);return C?C[1].trim():p.split(" ")[0]}let _=F(()=>{const p=new Set;for(const C of a(f))p.add(y(C.name));return Array.from(p).sort()}),S=F(()=>a(m).size===0?a(f):a(f).filter(p=>a(m).has(y(p.name))));function k(p){const C=new Set(a(m));C.has(p)?C.delete(p):C.add(p),h(m,C,!0)}let T=M(pe(new Set)),P=M(!1),D=M(!1),L=M(!1),A=M(null),j=M(""),R=M(""),Z=M(""),se=null;const ne=typeof window<"u"&&window.location.hostname==="localhost"?"http://localhost:5173/api":typeof window<"u"&&window.location.hostname.includes("clearway")?"/api":"https://clearway.pages.dev/api";let de=null;Nn(()=>{const p=a(R);return p&&p.includes("@")&&s()&&(de&&clearTimeout(de),de=setTimeout(()=>{K()},500)),()=>{de&&clearTimeout(de)}});function be(p){const H=new Date(p).getHours(),te=H>=12?"PM":"AM";return`${H%12||12} ${te}`}async function K(){try{const p=new URLSearchParams;p.set("facility",e.facilitySlug),p.set("date",s());const C=e.memberEmail||a(R);C&&p.set("email",C);const H=await fetch(`${ne}/suggestions?${p.toString()}`);if(!H.ok)return;const te=await H.json();if(te.personalized){const re=new Set;for(const ke of te.suggestions)re.add(`${ke.courtId}::${ke.startTime}`);h(T,re,!0)}else h(T,new Set,!0);h(P,te.personalized,!0)}catch{h(T,new Set,!0),h(P,!1)}}async function V(){h(o,!0),h(u,null),h(T,new Set,!0);try{const p=new URLSearchParams;p.set("facility",e.facilitySlug),p.set("date",s()),e.courtType&&p.set("court_type",e.courtType);const C=`${ne}/availability?${p.toString()}`,[H]=await Promise.all([fetch(C),K()]);if(!H.ok)throw new Error(`Failed to fetch availability: ${H.statusText}`);const te=await H.json();h(f,te.courts||[],!0),h(Z,te.facility?.name||e.facilitySlug,!0)}catch(p){const C=p instanceof Error?p.message:"Failed to load availability";h(u,C,!0),e.onError?.(p instanceof Error?p:new Error(C))}finally{h(o,!1)}}function oe(p,C){if(C.status!=="available")return;const H=`${p}::${C.startTime}`;if(a(d)===H){Be();return}h(g,p,!0),h(v,C,!0),h(d,H),c()&&setTimeout(()=>{se?.scrollIntoView({behavior:"smooth",block:"end"})},50)}function Be(){h(g,null),h(v,null),h(d,null)}function ht(){!a(j)||!a(R)?h(D,!0):Ue()}async function Ue(){if(!(!a(g)||!a(v))){h(L,!0),h(u,null);try{if(!a(f).find(te=>te.id===a(g)))throw new Error("Court not found");const C=await fetch(`${ne}/book`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({facility_slug:e.facilitySlug,court_id:a(g),date:s(),start_time:a(v).startTime,member_email:a(R),member_name:a(j)})});if(!C.ok){const te=await C.json();throw new Error(te.message||"Failed to create reservation")}const H=await C.json();h(A,H.id,!0),h(D,!0)}catch(p){const C=p instanceof Error?p.message:"Booking failed";h(u,C,!0),e.onError?.(p instanceof Error?p:new Error(C))}finally{h(L,!1)}}}function Ut(p){if(h(D,!1),e.onReservationComplete&&a(g)&&a(v)){const C=a(f).find(H=>H.id===a(g));e.onReservationComplete({id:a(A)||"",court:C?.name||"",start:a(v).startTime,end:a(v).endTime,price:a(v).priceCents||0})}Be(),V()}function rn(p){h(u,p.message,!0),e.onError?.(p)}function Wt(){h(D,!1),h(j,""),h(R,""),h(A,null)}yn(()=>{V()}),Nn(()=>{s()&&V()});var Yt=Vt(),x=jt(Yt);{var B=p=>{vs(p,{get facilitySlug(){return e.facilitySlug},get theme(){return n()},get advanceBookingDays(){return i()},get timezone(){return l()},get stripePublishableKey(){return e.stripePublishableKey},get onReservationComplete(){return e.onReservationComplete},get onError(){return e.onError}})},X=p=>{var C=Cs();let H;var te=b(C),re=w(b(te),2),ke=b(re);ke.__click=()=>{const I=new Date(s()+"T12:00:00");I.setDate(I.getDate()-7),s(I.toISOString().split("T")[0])};var lt=w(ke,2);Ke(lt,20,()=>Array.from({length:7},(I,z)=>{const Y=new Date(s()+"T12:00:00"),Q=new Date(Y);Q.setDate(Y.getDate()-Y.getDay());const $=new Date(Q);return $.setDate(Q.getDate()+z),$}),dt,(I,z)=>{var Y=ds();let Q;Y.__click=()=>{s(z.toISOString().split("T")[0])};var $=b(Y),ie=b($),ue=w($,2),Te=b(ue);q((ze,ce,xe)=>{Q=Ge(Y,1,"day-btn svelte-fbbhu1",null,Q,ze),W(ie,ce),W(Te,xe)},[()=>({selected:z.toISOString().split("T")[0]===s(),today:z.toISOString().split("T")[0]===new Date().toISOString().split("T")[0]}),()=>z.toLocaleDateString("en-US",{weekday:"short"}),()=>z.getDate()]),E(I,Y)});var Ct=w(lt,2);Ct.__click=()=>{const I=new Date(s()+"T12:00:00");I.setDate(I.getDate()+7),s(I.toISOString().split("T")[0])};var _t=w(te,2);{var le=I=>{var z=gs(),Y=b(z);Ke(Y,17,()=>a(_),dt,(ie,ue)=>{var Te=hs();let ze;Te.__click=()=>k(a(ue));var ce=b(Te);q(xe=>{ze=Ge(Te,1,"filter-chip svelte-fbbhu1",null,ze,xe),W(ce,a(ue))},[()=>({active:a(m).has(a(ue))})]),E(ie,Te)});var Q=w(Y,2);{var $=ie=>{var ue=_s();ue.__click=()=>h(m,new Set,!0),E(ie,ue)};O(Q,ie=>{a(m).size>0&&ie($)})}E(I,z)};O(_t,I=>{a(_).length>1&&I(le)})}var J=w(_t,2);{var Se=I=>{var z=bs();E(I,z)};O(J,I=>{a(o)&&I(Se)})}var gt=w(J,2);{var Xe=I=>{var z=ms(),Y=b(z),Q=b(Y),$=w(Y,2);$.__click=()=>V(),q(()=>W(Q,a(u))),E(I,z)};O(gt,I=>{a(u)&&!a(o)&&I(Xe)})}var ae=w(gt,2);{var me=I=>{var z=ks();Ke(z,21,()=>a(S),dt,(Y,Q)=>{var $=ws(),ie=b($),ue=b(ie),Te=w(ie,2);Ke(Te,21,()=>a(Q).slots,dt,(ze,ce)=>{var xe=ps();let mt;xe.__click=()=>oe(a(Q).id,a(ce));var Ht=b(xe),ye=b(Ht),Mt=w(Ht,2);{var fe=Ce=>{var yt=ys(),Hn=b(yt);q(Ps=>W(Hn,`$${Ps??""}`),[()=>(a(ce).priceCents/100).toFixed(0)]),E(Ce,yt)};O(Mt,Ce=>{a(ce).priceCents!==null&&Ce(fe)})}q((Ce,yt)=>{mt=Ge(xe,1,"slot svelte-fbbhu1",null,mt,Ce),xe.disabled=a(ce).status!=="available",W(ye,yt)},[()=>({available:a(ce).status==="available",peak:a(ce).priceCents!==null&&a(ce).priceCents>4e3,selected:a(d)===`${a(Q).id}::${a(ce).startTime}`,suggested:a(T).has(`${a(Q).id}::${a(ce).startTime}`)}),()=>be(a(ce).startTime)]),E(ze,xe)}),q(()=>W(ue,a(Q).name)),E(Y,$)}),E(I,z)};O(ae,I=>{!a(o)&&!a(u)&&a(S).length>0&&I(me)})}var bt=w(ae,2);{var an=I=>{var z=Ss();E(I,z)},Wn=I=>{var z=Vt(),Y=jt(z);{var Q=$=>{var ie=Es(),ue=w(b(ie),2);ue.__click=()=>h(m,new Set,!0),E($,ie)};O(Y,$=>{!a(o)&&!a(u)&&a(S).length===0&&$(Q)},!0)}E(I,z)};O(bt,I=>{!a(o)&&!a(u)&&a(f).length===0?I(an):I(Wn,!1)})}var je=w(bt,2);{var Pt=I=>{var z=Ts(),Y=b(z),Q=b(Y),$=b(Q),ie=w(Q,2),ue=b(ie),Te=w(ie,2);{var ze=fe=>{var Ce=Ds(),yt=b(Ce);q(Hn=>W(yt,`$${Hn??""}`),[()=>(a(v).priceCents/100).toFixed(0)]),E(fe,Ce)};O(Te,fe=>{a(v).priceCents&&fe(ze)})}var ce=w(Y,2),xe=b(ce);xe.__click=Be;var mt=w(xe,2);mt.__click=ht;var Ht=b(mt);{var ye=fe=>{var Ce=qe("Loading...");E(fe,Ce)},Mt=fe=>{var Ce=qe("Book");E(fe,Ce)};O(Ht,fe=>{a(L)?fe(ye):fe(Mt,!1)})}bi(z,fe=>se=fe,()=>se),q((fe,Ce,yt)=>{W($,fe),W(ue,`${Ce??""} - ${yt??""}`),mt.disabled=a(L)},[()=>a(f).find(fe=>fe.id===a(g))?.name,()=>be(a(v).startTime),()=>be(a(v).endTime)]),E(I,z)};O(je,I=>{a(v)&&a(g)&&!a(D)&&I(Pt)})}var wn=w(je,2);{var kn=I=>{var z=xs(),Y=w(b(z),2),Q=b(Y),$=w(b(Q),2),ie=w(Q,2),ue=w(b(ie),2),Te=w(ie,2),ze=b(Te);ze.__click=Wt;var ce=w(ze,2),xe=b(ce);{var mt=ye=>{var Mt=qe("Creating...");E(ye,Mt)},Ht=ye=>{var Mt=qe("Continue");E(ye,Mt)};O(xe,ye=>{a(L)?ye(mt):ye(Ht,!1)})}q(()=>{$.disabled=a(L),ue.disabled=a(L),ze.disabled=a(L),ce.disabled=a(L)}),jn("submit",Y,ye=>{ye.preventDefault(),Ue()}),bn($,()=>a(j),ye=>h(j,ye)),bn(ue,()=>a(R),ye=>h(R,ye)),E(I,z)},Yn=I=>{var z=Vt(),Y=jt(z);{var Q=$=>{{let ie=F(()=>a(f).find(Te=>Te.id===a(g))?.name||""),ue=F(()=>a(v).priceCents||0);Yr($,{get reservationId(){return a(A)},get courtName(){return a(ie)},get facilityName(){return a(Z)},get startTime(){return a(v).startTime},get endTime(){return a(v).endTime},get priceCents(){return a(ue)},get memberName(){return a(j)},get memberEmail(){return a(R)},get theme(){return n()},get stripePublishableKey(){return e.stripePublishableKey},onSuccess:Ut,onError:rn,onCancel:Wt})}};O(Y,$=>{a(D)&&a(A)&&a(v)&&a(g)&&e.stripePublishableKey&&$(Q)},!0)}E(I,z)};O(wn,I=>{a(D)&&!a(A)?I(kn):I(Yn,!1)})}q(()=>{H=Ge(C,1,"widget svelte-fbbhu1",null,H,{"has-selection":a(v)&&!a(D),embedded:c()}),st(C,"data-theme",n())}),E(p,C)};O(x,p=>{r()==="calendar"?p(B):p(X,!1)})}E(t,Yt),ct()}xt(["click"]);function pn(t){const{facility:e,container:n,theme:r="dark",date:s,courtType:i,stripePublishableKey:l,onBook:c,onReady:o,onError:u}=t;if(!e){const m=new Error("facility is required");throw u?.(m),m}if(!n){const m=new Error("container is required");throw u?.(m),m}const f=document.querySelector(n);if(!f){const m=new Error(`Container element not found: ${n}`);throw u?.(m),m}let g;try{g=Vr(Zr,{target:f,props:{facilitySlug:e,theme:r,date:s||new Date().toISOString().split("T")[0],courtType:i,stripePublishableKey:l,onReservationComplete:c?m=>c({id:m.id,court:m.courtName,start:m.startTime,end:m.endTime,price:m.price}):void 0,onError:u}}),o?.()}catch(m){const y=m instanceof Error?m:new Error(String(m));throw u?.(y),y}let v=s||new Date().toISOString().split("T")[0];const d={destroy:()=>{g&&typeof g=="object"&&(f.innerHTML="")},setDate:m=>{v=m,g&&(d.destroy(),g=Vr(Zr,{target:f,props:{facilitySlug:e,theme:r,date:m,courtType:i,stripePublishableKey:l,onReservationComplete:c?y=>c({id:y.id,court:y.courtName,start:y.startTime,end:y.endTime,price:y.price}):void 0,onError:u}}))},refresh:()=>{d.setDate(v)}};return d}const Xr=pn;return typeof window<"u"&&(window.Clearway={init:pn,createWidget:Xr,version:"1.0.0"},window.CourtReserve={createWidget:pn,version:"1.0.0"}),sn.createWidget=Xr,sn.init=pn,Object.defineProperty(sn,Symbol.toStringTag,{value:"Module"}),sn})({});
