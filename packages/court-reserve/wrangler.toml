# Court Reserve - Autonomous Court Scheduling SaaS
# The infrastructure disappears; courts get booked.

name = "court-reserve"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]
pages_build_output_dir = ".svelte-kit/cloudflare"

# D1 Database - Core data store
[[d1_databases]]
binding = "DB"
database_name = "court-reserve-db"
database_id = "3bdf375f-3689-4e2a-8bcb-ff1599912a89"
migrations_dir = "migrations"

# KV for facility config cache (5 min TTL)
[[kv_namespaces]]
binding = "FACILITY_CACHE"
id = "1a67592787bd4e98a3b806278992386a"

# KV for sessions and conversation state
[[kv_namespaces]]
binding = "SESSIONS"
id = "973b18397c4d4b068313152a642f1ad5"

# R2 for assets (facility logos, etc.)
[[r2_buckets]]
binding = "R2_STORAGE"
bucket_name = "court-reserve-assets"

# Workers AI for SMS intent parsing
[ai]
binding = "AI"

# NOTE: The following features require a separate Worker (not Pages):
# - Durable Objects (real-time court state)
# - Queues (notification processing)
# - Cron triggers (scheduled tasks)
# See workers/realtime/ and workers/notifier/ for these features

[vars]
ENVIRONMENT = "production"
BASE_DOMAIN = "courtreserve.createsomething.space"

# Court Reserve SaaS subscription prices
STRIPE_PRICE_BASIC = "price_1Sk5BUAzstI6Ecr5iPn2aC6u"      # $49/month
STRIPE_PRICE_PRO = "price_1Sk5BVAzstI6Ecr5zAwnT4uT"        # $99/month
STRIPE_PRICE_ENTERPRISE = "price_1Sk5BVAzstI6Ecr5YyFRtdl3" # $249/month

# Secrets (configure via `wrangler secret put`):
# - STRIPE_SECRET_KEY
# - STRIPE_WEBHOOK_SECRET
# - TWILIO_ACCOUNT_SID
# - TWILIO_AUTH_TOKEN
# - TWILIO_FROM_NUMBER
# - SENDGRID_API_KEY
