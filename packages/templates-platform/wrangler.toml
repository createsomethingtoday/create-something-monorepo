# Templates Platform
name = "templates-platform"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]
pages_build_output_dir = ".svelte-kit/cloudflare"

# D1 Database (shared with vertical templates)
[[d1_databases]]
binding = "DB"
database_name = "templates-platform-db"
database_id = "a06516a5-6c4b-472f-8826-d730e3a74926"
migrations_dir = "migrations"

# KV for sessions
[[kv_namespaces]]
binding = "KV"
id = "bcb39a6258fe49b79da9dc9b09440934"

# KV for tenant routing cache
[[kv_namespaces]]
binding = "TENANT_CACHE"
id = "bcb39a6258fe49b79da9dc9b09440934"

# R2 for site assets
[[r2_buckets]]
binding = "SITE_BUCKET"
bucket_name = "templates-site-assets"

# Queue for async builds
# [[queues.producers]]
# binding = "BUILD_QUEUE"
# queue = "template-builds"

[vars]
ENVIRONMENT = "production"
BASE_DOMAIN = "createsomething.space"

# Secrets (configure in Cloudflare Dashboard or `wrangler secret put`):
# - INTERNAL_API_SECRET: Shared secret for agency <-> templates-platform APIs
